export const metadata = {
  title: 'Order Refunds',
  description:
    'On this page, we\'ll dive into the different order-specific refund endpoints you can use to manage refunds for individual orders.',
}

# Order Refunds

These endpoints allow you to manage your Vatly refunds.

## The refund model

The refund model contains all the information about order refunds, including the amount refunded and the reason for the refund. For a complete overview of the refund model, see the [Refunds](/refunds) documentation.

---

## Create a refund {{ tag: 'POST', label: '/v1/orders/:orderId/refunds' }}

<Row>
  <Col>
    This endpoint allows you to create a partial refund for a specific order.

    ### Required permissions
    - `orders:write`
    - `refunds:write`

    ### Parameters
    <Properties>
      <Property name="orderId" type="string">
        The unique identifier of the order.
      </Property>
      <Property name="amount" type="integer" required>
        The amount to refund in cents.
      </Property>
      <Property name="reason" type="string">
        The reason for the refund.
      </Property>
    </Properties>
  </Col>
  <Col sticky>
    <CodeGroup title="Request" tag="POST" label="/v1/orders/:orderId/refunds">
    ```bash {{ title: 'cURL' }}
    curl -X POST https://api.vatly.com/v1/orders/ord_1234/refunds \
      -H "Authorization: Bearer {token}" \
      -d amount=1000 \
      -d reason="Customer request"
    ```
    </CodeGroup>
  </Col>
</Row>

---

## Create a full refund {{ tag: 'POST', label: '/v1/orders/:orderId/refunds/full' }}

<Row>
  <Col>
    This endpoint allows you to create a full refund for a specific order. This will refund the entire remaining amount of the order.

    ### Required permissions
    - `orders:write`
    - `refunds:write`

    ### Parameters
    <Properties>
      <Property name="orderId" type="string">
        The unique identifier of the order.
      </Property>
      <Property name="reason" type="string">
        The reason for the refund.
      </Property>
    </Properties>
  </Col>
  <Col sticky>
    <CodeGroup title="Request" tag="POST" label="/v1/orders/:orderId/refunds/full">
    ```bash {{ title: 'cURL' }}
    curl -X POST https://api.vatly.com/v1/orders/ord_1234/refunds/full \
      -H "Authorization: Bearer {token}" \
      -d reason="Customer request"
    ```
    </CodeGroup>
  </Col>
</Row>

---

## List order refunds {{ tag: 'GET', label: '/v1/orders/:orderId/refunds' }}

<Row>
  <Col>
    This endpoint allows you to retrieve a list of all refunds for a specific order.

    ### Required permissions
    - `orders:read`
    - `refunds:read`

    ### Parameters
    <Properties>
      <Property name="orderId" type="string">
        The unique identifier of the order.
      </Property>
    </Properties>
  </Col>
  <Col sticky>
    <CodeGroup title="Request" tag="GET" label="/v1/orders/:orderId/refunds">
    ```bash {{ title: 'cURL' }}
    curl https://api.vatly.com/v1/orders/ord_1234/refunds \
      -H "Authorization: Bearer {token}"
    ```
    </CodeGroup>
  </Col>
</Row>

---

## Get an order refund {{ tag: 'GET', label: '/v1/orders/:orderId/refunds/:refundId' }}

<Row>
  <Col>
    This endpoint allows you to retrieve details of a specific refund for a specific order.

    ### Required permissions
    - `orders:read`
    - `refunds:read`

    ### Parameters
    <Properties>
      <Property name="orderId" type="string">
        The unique identifier of the order.
      </Property>
      <Property name="refundId" type="string">
        The unique identifier of the refund.
      </Property>
    </Properties>
  </Col>
  <Col sticky>
    <CodeGroup title="Request" tag="GET" label="/v1/orders/:orderId/refunds/:refundId">
    ```bash {{ title: 'cURL' }}
    curl https://api.vatly.com/v1/orders/ord_1234/refunds/ref_5678 \
      -H "Authorization: Bearer {token}"
    ```
    </CodeGroup>
  </Col>
</Row>

---

## Cancel an order refund {{ tag: 'DELETE', label: '/v1/orders/:orderId/refunds/:refundId' }}

<Row>
  <Col>
    This endpoint allows you to cancel a pending refund for a specific order. Only pending refunds can be cancelled.

    ### Required permissions
    - `orders:write`
    - `refunds:write`

    ### Parameters
    <Properties>
      <Property name="orderId" type="string">
        The unique identifier of the order.
      </Property>
      <Property name="refundId" type="string">
        The unique identifier of the refund to cancel.
      </Property>
    </Properties>
  </Col>
  <Col sticky>
    <CodeGroup title="Request" tag="DELETE" label="/v1/orders/:orderId/refunds/:refundId">
    ```bash {{ title: 'cURL' }}
    curl -X DELETE https://api.vatly.com/v1/orders/ord_1234/refunds/ref_5678 \
      -H "Authorization: Bearer {token}"
    ```
    </CodeGroup>
  </Col>
</Row>
