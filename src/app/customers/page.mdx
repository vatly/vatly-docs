export const metadata = {
  title: 'Customers',
  description:
    'On this page, weâ€™ll dive into the different customer endpoints you can use to manage your Vatly customers programmatically.',
}

# The Customers API

Vatly enables you to sell your digital goods and services to your customers all around the world. To manage your customers and their checkouts, you can use the following endpoints in the Vatly API. {{ className: 'lead' }}

## The Customer API Resource

Below you'll find all properties for the Vatly Customer API resource.

### Properties

<Properties>
  <Property name="id" type="string">
    Unique identifier for the customer. It always starts with `customer_`. For example, `customer_SUKjQ4SHxPrBNBb4ea5zH`.
  </Property>
  <Property name="resouce" type="string">
    The resource type for this customer. Always `customer`.
  </Property>
  <Property name="testmode" type="boolean">
    Whether this resource is in test mode.
  </Property>
  <Property name="email" type="string">
    The email address for the customer.
  </Property>
  <Property name="createdAt" type="string">
    The moment the customer was created, in ISO 8601 format.
  </Property>
  <Property name="metadata" type="string">
    Any metadata associated with the customer. Provide any data you like to be stored with the customer.
  </Property>
  <Property name="_links_" type="string">
    An object with API urls and other hyperlinks relevant to the customer.
  </Property>
</Properties>

---

## List all customers {{ tag: 'GET', label: '/v1/customers' }}

<Row>
  <Col>

    This endpoint allows you to retrieve a paginated list of all your customers. By default, a maximum of ten customers are shown per page.

    ### Optional attributes

    <Properties>
      <Property name="limit" type="integer">
        The number of customers to return (default: 10, max: 100).
      </Property>
      <Property name="startingAfter" type="string">
        A cursor for use in pagination. Returns results after this customer ID.
      </Property>
      <Property name="endingBefore" type="string">
        A cursor for use in pagination. Returns results before this customer ID.
      </Property>
    </Properties>

  </Col>
  <Col sticky>

    <CodeGroup title="Request" tag="GET" label="/v1/customers">

    ```bash {{ title: 'cURL' }}
    curl -G https://api.vatly.com/v1/customers \
      -H "Authorization: Bearer live_your_api_key_here" \
      -d limit=10
    ```

    ```php {{ title: 'PHP' }}
    $vatly = new \Vatly\API\VatlyApiClient();
    $vatly->setApiKey('live_your_api_key_here');

    $customers = $vatly->customers->page();
    ```

    </CodeGroup>

    ```json {{ title: 'Response' }}
    {
      "data": [
        {
          "id": "customer_SUKjQ4SHxPrBNBb4ea5zH",
          "resource": "customer",
          "testmode": false,
          "email": "john@example.com",
          "createdAt": "2020-01-01T00:00:00+00:00",
          "metadata": {},
          "_links": {
            "self": "https://api.vatly.com/v1/customers/customer_SUKjQ4SHxPrBNBb4ea5zH"
          }
        }
      ],
      "links": {
        "self": {
          "href": "https://api.vatly.com/v1/customers?limit=10",
          "type": "application/json"
        },
        "next": {
          "href": "https://api.vatly.com/v1/customers?startingAfter=customer_SUKjQ4SHxPrBNBb4ea5zH&limit=10",
          "type": "application/json"
        },
        "prev": null
      },
      "count": 1
    }
    ```

  </Col>
</Row>

---

## Create a customer {{ tag: 'POST', label: '/v1/customers' }}

<Row>
  <Col>

    This endpoint allows you to add a new customer to Vatly. To add a customer, you must provide their Vatly email.

    ### Required attributes

    <Properties>
      <Property name="email" type="string">
        The email address for the customer.
      </Property>
    </Properties>

    ### Optional attributes

    <Properties>
      <Property name="metadata" type="string">
        Any metadata associated with the customer. Provide any data you like to be stored with the customer.
      </Property>
    </Properties>

  </Col>
  <Col sticky>

    <CodeGroup title="Request" tag="POST" label="/v1/customers">

    ```bash {{ title: 'cURL' }}
    curl https://api.vatly.com/v1/customers \
      -H "Authorization: Bearer live_your_api_key_here" \
      -d email="john@example.com"
    ```

    {/* ```js
    import ApiClient from '@example/protocol-api'

    const client = new ApiClient(token)

    await client.customers.create({
      username: 'FrankMcCallister',
      phone_number: '1-800-759-3000',
      avatar_url: 'https://assets.protocol.chat/avatars/frank.jpg',
    })
    ``` */}

    {/* ```python
    from protocol_api import ApiClient

    client = ApiClient(token)

    client.customers.create(
      username="FrankMcCallister",
      phone_number="1-800-759-3000",
      avatar_url="https://assets.protocol.chat/avatars/frank.jpg",
    )
    ``` */}

    ```php {{ title: 'PHP' }}
    $vatly = new \Vatly\API\VatlyApiClient();
    $vatly->setApiKey('live_your_api_key_here');

    $vatly->customers->create([
      'email' => 'john@example.com',
    ]);
    ```

    </CodeGroup>

    ```json {{ title: 'Response' }}
    {
      "id": "customer_SUKjQ4SHxPrBNBb4ea5zH",
      "resource": "customer",
      "testmode": false,
      "email": "john@example.com",
      "createdAt": "2020-01-01T00:00:00+00:00",
      "metadata": {},
      "_links": {
        "self": "https://api.vatly.com/v1/customers/customer_SUKjQ4SHxPrBNBb4ea5zH"
    }
    ```

  </Col>
</Row>

---

## Retrieve a customer {{ tag: 'GET', label: '/v1/customers/:id' }}

<Row>
  <Col>

    This endpoint allows you to retrieve a customer by providing their Vatly id. Refer to [the list](#the-customer-model) at the top of this page to see which properties are included with customer objects.

  </Col>
  <Col sticky>

    <CodeGroup title="Request" tag="GET" label="/v1/customers/customer_SUKjQ4SHxPrBNBb4ea5zH">

    ```bash {{ title: 'cURL' }}
    curl https://api.vatly.com/v1/customers/customer_SUKjQ4SHxPrBNBb4ea5zH \
      -H "Authorization: Bearer live_your_api_key_here"
    ```

    {/* ```js
    import ApiClient from '@example/protocol-api'

    const client = new ApiClient(token)

    await client.customers.get('WAz8eIbvDR60rouK')
    ```

    ```python
    from protocol_api import ApiClient

    client = ApiClient(token)

    client.customers.get("WAz8eIbvDR60rouK")
    ``` */}

    ```php {{ title: 'PHP' }}
    $vatly = new \Vatly\API\VatlyApiClient();
    $vatly->setApiKey('live_your_api_key_here');

    $vatly->customers->get('customer_SUKjQ4SHxPrBNBb4ea5zH');
    ```

    </CodeGroup>

    ```json {{ title: 'Response' }}
    {
      "id": "customer_SUKjQ4SHxPrBNBb4ea5zH",
      "resource": "customer",
      "testmode": false,
      "email": "john@example.com",
      "createdAt": "2020-01-01T00:00:00+00:00",
      "metadata": {},
      "_links": {
        "self": "https://api.vatly.com/v1/customers/customer_SUKjQ4SHxPrBNBb4ea5zH"
      }
    }
    ```

  </Col>
</Row>

{/* ---

## Update a customer {{ tag: 'PUT', label: '/v1/customers/:id' }}

<Row>
  <Col>

    This endpoint allows you to perform an update on a customer. Currently, the only attribute that can be updated on customers is the `display_name` attribute which controls how a customer appears in your customer list in Vatly.

    ### Optional attributes

    <Properties>
      <Property name="display_name" type="string">
        The customer display name in the customer list. By default, this is just the username.
      </Property>
    </Properties>

  </Col>
  <Col sticky>

    <CodeGroup title="Request" tag="PUT" label="/v1/customers/WAz8eIbvDR60rouK">

    ```bash {{ title: 'cURL' }}
    curl -X PUT https://api.vatly.com/v1/customers/WAz8eIbvDR60rouK \
      -H "Authorization: Bearer live_your_api_key_here" \
      -d display_name="UncleFrank"
    ```

    ```js
    import ApiClient from '@example/protocol-api'

    const client = new ApiClient(token)

    await client.customers.update('WAz8eIbvDR60rouK', {
        display_name: 'UncleFrank',
    })
    ```

    ```python
    from protocol_api import ApiClient

    client = ApiClient(token)

    client.customers.update("WAz8eIbvDR60rouK", display_name="UncleFrank")
    ```

    ```php {{ title: 'PHP' }}
    $vatly = new \Vatly\API\VatlyApiClient();
    $vatly->setApiKey('live_your_api_key_here');

    $vatly->customers->update('WAz8eIbvDR60rouK', [
      'display_name' => 'UncleFrank',
    ]);
    ```

    </CodeGroup>

    ```json {{ title: 'Response' }}
    {
      "id": "WAz8eIbvDR60rouK",
      "username": "FrankMcCallister",
      "phone_number": "1-800-759-3000",
      "avatar_url": "https://assets.protocol.chat/avatars/frank.jpg",
      "display_name": "UncleFrank",
      "checkout_id": "xgQQXg3hrtjh7AvZ",
      "last_active_at": 705103200,
      "createdAt": 692233200
    }
    ```

  </Col>
</Row>

---

## Delete a customer {{ tag: 'DELETE', label: '/v1/customers/:id' }}

<Row>
  <Col>

    This endpoint allows you to delete customers from your customer list in Vatly. Note: This will also delete your checkout with the given customer.

  </Col>
  <Col sticky>

    <CodeGroup title="Request" tag="DELETE" label="/v1/customers/WAz8eIbvDR60rouK">

    ```bash {{ title: 'cURL' }}
    curl -X DELETE https://api.vatly.com/v1/customers/WAz8eIbvDR60rouK \
      -H "Authorization: Bearer live_your_api_key_here"
    ```

    ```js
    import ApiClient from '@example/protocol-api'

    const client = new ApiClient(token)

    await client.customers.delete('WAz8eIbvDR60rouK')
    ```

    ```python
    from protocol_api import ApiClient

    client = ApiClient(token)

    client.customers.delete("WAz8eIbvDR60rouK")
    ```

    ```php {{ title: 'PHP' }}
    $vatly = new \Vatly\API\VatlyApiClient();
    $vatly->setApiKey('live_your_api_key_here');

    $vatly->customers->delete('WAz8eIbvDR60rouK');
    ```

    </CodeGroup>

  </Col>
</Row> */}
