[{"data":1,"prerenderedAt":470},["ShallowReactive",2],{"navigation_docs":3,"-packages-laravel-customers":155,"-packages-laravel-customers-surround":465},[4,8,42,83,151],{"title":5,"path":6,"stem":7},"Welcome to Vatly","/introduction","0.introduction",{"title":9,"path":10,"stem":11,"children":12,"page":41},"Guides","/guides","1.guides",[13,17,21,25,29,33,37],{"title":14,"path":15,"stem":16},"Quickstart","/guides/quickstart","1.guides/1.quickstart",{"title":18,"path":19,"stem":20},"Vatly SDKs","/guides/sdks","1.guides/2.sdks",{"title":22,"path":23,"stem":24},"Authentication","/guides/authentication","1.guides/3.authentication",{"title":26,"path":27,"stem":28},"Pagination","/guides/pagination","1.guides/4.pagination",{"title":30,"path":31,"stem":32},"Errors","/guides/errors","1.guides/5.errors",{"title":34,"path":35,"stem":36},"Webhooks","/guides/webhooks","1.guides/6.webhooks",{"title":38,"path":39,"stem":40},"Idempotency","/guides/idempotency","1.guides/7.idempotency",false,{"title":43,"path":44,"stem":45,"children":46,"page":41},"Api Reference","/api-reference","2.api-reference",[47,51,55,59,63,67,71,75,79],{"title":48,"path":49,"stem":50},"Customers","/api-reference/customers","2.api-reference/1.customers",{"title":52,"path":53,"stem":54},"Checkouts","/api-reference/checkouts","2.api-reference/2.checkouts",{"title":56,"path":57,"stem":58},"Subscriptions","/api-reference/subscriptions","2.api-reference/3.subscriptions",{"title":60,"path":61,"stem":62},"Subscription Plans","/api-reference/subscription-plans","2.api-reference/4.subscription-plans",{"title":64,"path":65,"stem":66},"Orders","/api-reference/orders","2.api-reference/5.orders",{"title":68,"path":69,"stem":70},"Order Refunds","/api-reference/refunds","2.api-reference/6.refunds",{"title":72,"path":73,"stem":74},"Refunds","/api-reference/global-refunds","2.api-reference/7.global-refunds",{"title":76,"path":77,"stem":78},"Chargebacks","/api-reference/chargebacks","2.api-reference/8.chargebacks",{"title":80,"path":81,"stem":82},"One-off Products","/api-reference/one-off-products","2.api-reference/9.one-off-products",{"title":84,"path":85,"stem":86,"children":87},"Packages","/packages","3.packages",[88,91,128],{"title":89,"path":85,"stem":90},"Overview","3.packages/index",{"title":92,"path":93,"stem":94,"children":95,"page":41},"Php","/packages/php","3.packages/1.php",[96,100,103,106,109,112,115,118,122,125],{"title":97,"path":98,"stem":99},"Getting Started","/packages/php/readme","3.packages/1.php/0.readme",{"title":48,"path":101,"stem":102},"/packages/php/customers","3.packages/1.php/1.customers",{"title":52,"path":104,"stem":105},"/packages/php/checkouts","3.packages/1.php/2.checkouts",{"title":56,"path":107,"stem":108},"/packages/php/subscriptions","3.packages/1.php/3.subscriptions",{"title":60,"path":110,"stem":111},"/packages/php/subscriptionplans","3.packages/1.php/4.subscriptionplans",{"title":64,"path":113,"stem":114},"/packages/php/orders","3.packages/1.php/5.orders",{"title":72,"path":116,"stem":117},"/packages/php/refunds","3.packages/1.php/6.refunds",{"title":119,"path":120,"stem":121},"One-Off Products","/packages/php/oneoffproducts","3.packages/1.php/7.oneoffproducts",{"title":76,"path":123,"stem":124},"/packages/php/chargebacks","3.packages/1.php/8.chargebacks",{"title":34,"path":126,"stem":127},"/packages/php/webhooks","3.packages/1.php/9.webhooks",{"title":129,"path":130,"stem":131,"children":132,"page":41},"Laravel","/packages/laravel","3.packages/2.laravel",[133,136,139,142,145,148],{"title":97,"path":134,"stem":135},"/packages/laravel/readme","3.packages/2.laravel/0.readme",{"title":48,"path":137,"stem":138},"/packages/laravel/customers","3.packages/2.laravel/1.customers",{"title":52,"path":140,"stem":141},"/packages/laravel/checkouts","3.packages/2.laravel/2.checkouts",{"title":56,"path":143,"stem":144},"/packages/laravel/subscriptions","3.packages/2.laravel/3.subscriptions",{"title":64,"path":146,"stem":147},"/packages/laravel/orders","3.packages/2.laravel/4.orders",{"title":34,"path":149,"stem":150},"/packages/laravel/webhooks","3.packages/2.laravel/5.webhooks",{"title":152,"path":153,"stem":154},"Integrations","/integrations","4.integrations",{"id":156,"title":48,"body":157,"description":459,"extension":460,"links":461,"meta":462,"navigation":218,"path":137,"seo":463,"stem":138,"__hash__":464},"docs/3.packages/2.laravel/1.customers.md",{"type":158,"value":159,"toc":453},"minimark",[160,164,168,173,310,314,366,370,401,405,416,436,449],[161,162,48],"h1",{"id":163},"customers",[165,166,167],"p",{},"Every billable model can be linked to a Vatly customer. The customer is created automatically when needed, or you can create one explicitly.",[169,170,172],"h2",{"id":171},"creating-a-customer","Creating a customer",[174,175,180],"pre",{"className":176,"code":177,"language":178,"meta":179,"style":179},"language-php shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","// Create a Vatly customer for this user\n$user->createAsVatlyCustomer();\n\n// Create with extra data\n$user->createAsVatlyCustomer([\n    'locale' => 'nl_NL',\n    'metadata' => ['internal_id' => $user->id],\n]);\n","php","",[181,182,183,192,213,220,226,240,267,304],"code",{"__ignoreMap":179},[184,185,188],"span",{"class":186,"line":187},"line",1,[184,189,191],{"class":190},"sHwdD","// Create a Vatly customer for this user\n",[184,193,195,199,203,206,210],{"class":186,"line":194},2,[184,196,198],{"class":197},"sMK4o","$",[184,200,202],{"class":201},"sTEyZ","user",[184,204,205],{"class":197},"->",[184,207,209],{"class":208},"s2Zo4","createAsVatlyCustomer",[184,211,212],{"class":197},"();\n",[184,214,216],{"class":186,"line":215},3,[184,217,219],{"emptyLinePlaceholder":218},true,"\n",[184,221,223],{"class":186,"line":222},4,[184,224,225],{"class":190},"// Create with extra data\n",[184,227,229,231,233,235,237],{"class":186,"line":228},5,[184,230,198],{"class":197},[184,232,202],{"class":201},[184,234,205],{"class":197},[184,236,209],{"class":208},[184,238,239],{"class":197},"([\n",[184,241,243,246,250,253,256,259,262,264],{"class":186,"line":242},6,[184,244,245],{"class":197},"    '",[184,247,249],{"class":248},"sfazB","locale",[184,251,252],{"class":197},"'",[184,254,255],{"class":197}," =>",[184,257,258],{"class":197}," '",[184,260,261],{"class":248},"nl_NL",[184,263,252],{"class":197},[184,265,266],{"class":197},",\n",[184,268,270,272,275,277,279,282,284,287,289,291,294,296,298,301],{"class":186,"line":269},7,[184,271,245],{"class":197},[184,273,274],{"class":248},"metadata",[184,276,252],{"class":197},[184,278,255],{"class":197},[184,280,281],{"class":197}," [",[184,283,252],{"class":197},[184,285,286],{"class":248},"internal_id",[184,288,252],{"class":197},[184,290,255],{"class":197},[184,292,293],{"class":197}," $",[184,295,202],{"class":201},[184,297,205],{"class":197},[184,299,300],{"class":201},"id",[184,302,303],{"class":197},"],\n",[184,305,307],{"class":186,"line":306},8,[184,308,309],{"class":197},"]);\n",[169,311,313],{"id":312},"checking-customer-status","Checking customer status",[174,315,317],{"className":176,"code":316,"language":178,"meta":179,"style":179},"// Check if the user has a Vatly customer ID\n$user->hasVatlyId(); // bool\n\n// Get the Vatly customer ID\n$user->vatlyId(); // string|null\n",[181,318,319,324,341,345,350],{"__ignoreMap":179},[184,320,321],{"class":186,"line":187},[184,322,323],{"class":190},"// Check if the user has a Vatly customer ID\n",[184,325,326,328,330,332,335,338],{"class":186,"line":194},[184,327,198],{"class":197},[184,329,202],{"class":201},[184,331,205],{"class":197},[184,333,334],{"class":208},"hasVatlyId",[184,336,337],{"class":197},"();",[184,339,340],{"class":190}," // bool\n",[184,342,343],{"class":186,"line":215},[184,344,219],{"emptyLinePlaceholder":218},[184,346,347],{"class":186,"line":222},[184,348,349],{"class":190},"// Get the Vatly customer ID\n",[184,351,352,354,356,358,361,363],{"class":186,"line":228},[184,353,198],{"class":197},[184,355,202],{"class":201},[184,357,205],{"class":197},[184,359,360],{"class":208},"vatlyId",[184,362,337],{"class":197},[184,364,365],{"class":190}," // string|null\n",[169,367,369],{"id":368},"retrieving-customer-data","Retrieving customer data",[174,371,373],{"className":176,"code":372,"language":178,"meta":179,"style":179},"// Get the full customer object from the Vatly API\n$customer = $user->asVatlyCustomer();\n",[181,374,375,380],{"__ignoreMap":179},[184,376,377],{"class":186,"line":187},[184,378,379],{"class":190},"// Get the full customer object from the Vatly API\n",[184,381,382,384,387,390,392,394,396,399],{"class":186,"line":194},[184,383,198],{"class":197},[184,385,386],{"class":201},"customer ",[184,388,389],{"class":197},"=",[184,391,293],{"class":197},[184,393,202],{"class":201},[184,395,205],{"class":197},[184,397,398],{"class":208},"asVatlyCustomer",[184,400,212],{"class":197},[169,402,404],{"id":403},"how-it-works","How it works",[165,406,407,408,411,412,415],{},"The ",[181,409,410],{},"vatly_id"," column on your billable model stores the Vatly customer identifier. When you call ",[181,413,414],{},"createAsVatlyCustomer()",", it:",[417,418,419,427,433],"ol",{},[420,421,422,423,426],"li",{},"Sends a ",[181,424,425],{},"POST"," request to the Vatly API to create a customer",[420,428,429,430,432],{},"Stores the returned customer ID in the ",[181,431,410],{}," column",[420,434,435],{},"Returns the customer response",[165,437,438,439,441,442,444,445,448],{},"If the user already has a ",[181,440,410],{},", calling ",[181,443,414],{}," will throw a ",[181,446,447],{},"CustomerAlreadyCreatedException",".",[450,451,452],"style",{},"html pre.shiki code .sHwdD, html code.shiki .sHwdD{--shiki-light:#90A4AE;--shiki-light-font-style:italic;--shiki-default:#546E7A;--shiki-default-font-style:italic;--shiki-dark:#676E95;--shiki-dark-font-style:italic}html pre.shiki code .sMK4o, html code.shiki .sMK4o{--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF}html pre.shiki code .sTEyZ, html code.shiki .sTEyZ{--shiki-light:#90A4AE;--shiki-default:#EEFFFF;--shiki-dark:#BABED8}html pre.shiki code .s2Zo4, html code.shiki .s2Zo4{--shiki-light:#6182B8;--shiki-default:#82AAFF;--shiki-dark:#82AAFF}html pre.shiki code .sfazB, html code.shiki .sfazB{--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D}html .light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html.light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}",{"title":179,"searchDepth":194,"depth":194,"links":454},[455,456,457,458],{"id":171,"depth":194,"text":172},{"id":312,"depth":194,"text":313},{"id":368,"depth":194,"text":369},{"id":403,"depth":194,"text":404},"Vatly Laravel Package - Customers","md",null,{},{"title":48,"description":459},"s9dYwN7O1aCObcCOaV3gkJZ-MgSoSeW469W5FDSQiPo",[466,468],{"title":97,"path":134,"stem":135,"description":467,"children":-1},"Vatly Laravel Package - Getting Started",{"title":52,"path":140,"stem":141,"description":469,"children":-1},"Vatly Laravel Package - Checkouts",1772234170434]