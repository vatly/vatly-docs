[{"data":1,"prerenderedAt":751},["ShallowReactive",2],{"navigation_docs":3,"-packages-laravel-subscriptions":154,"-packages-laravel-subscriptions-surround":746},[4,8,42,83,150],{"title":5,"path":6,"stem":7},"Welcome to Vatly","/introduction","0.introduction",{"title":9,"path":10,"stem":11,"children":12,"page":41},"Guides","/guides","1.guides",[13,17,21,25,29,33,37],{"title":14,"path":15,"stem":16},"Quickstart","/guides/quickstart","1.guides/1.quickstart",{"title":18,"path":19,"stem":20},"SDKs & Packages","/guides/sdks","1.guides/2.sdks",{"title":22,"path":23,"stem":24},"Authentication","/guides/authentication","1.guides/3.authentication",{"title":26,"path":27,"stem":28},"Pagination","/guides/pagination","1.guides/4.pagination",{"title":30,"path":31,"stem":32},"Webhooks","/guides/webhooks","1.guides/5.webhooks",{"title":34,"path":35,"stem":36},"Errors","/guides/errors","1.guides/6.errors",{"title":38,"path":39,"stem":40},"Idempotency","/guides/idempotency","1.guides/7.idempotency",false,{"title":43,"path":44,"stem":45,"children":46,"page":41},"API Reference","/api-reference","2.api-reference",[47,51,55,59,63,67,71,75,79],{"title":48,"path":49,"stem":50},"Customers","/api-reference/customers","2.api-reference/1.customers",{"title":52,"path":53,"stem":54},"Checkouts","/api-reference/checkouts","2.api-reference/2.checkouts",{"title":56,"path":57,"stem":58},"Subscriptions","/api-reference/subscriptions","2.api-reference/3.subscriptions",{"title":60,"path":61,"stem":62},"Subscription Plans","/api-reference/subscription-plans","2.api-reference/4.subscription-plans",{"title":64,"path":65,"stem":66},"One-off Products","/api-reference/one-off-products","2.api-reference/5.one-off-products",{"title":68,"path":69,"stem":70},"Orders","/api-reference/orders","2.api-reference/6.orders",{"title":72,"path":73,"stem":74},"Order Refunds","/api-reference/refunds","2.api-reference/7.refunds",{"title":76,"path":77,"stem":78},"Refunds","/api-reference/global-refunds","2.api-reference/8.global-refunds",{"title":80,"path":81,"stem":82},"Chargebacks","/api-reference/chargebacks","2.api-reference/9.chargebacks",{"title":84,"path":85,"stem":86,"children":87},"Packages","/packages","3.packages/0.index",[88,90,127],{"title":89,"path":85,"stem":86},"Overview",{"title":91,"path":92,"stem":93,"children":94,"page":41},"PHP SDK","/packages/php","3.packages/1.php",[95,99,102,105,108,111,114,117,121,124],{"title":96,"path":97,"stem":98},"Getting Started","/packages/php/readme","3.packages/1.php/0.readme",{"title":48,"path":100,"stem":101},"/packages/php/customers","3.packages/1.php/1.customers",{"title":52,"path":103,"stem":104},"/packages/php/checkouts","3.packages/1.php/2.checkouts",{"title":56,"path":106,"stem":107},"/packages/php/subscriptions","3.packages/1.php/3.subscriptions",{"title":60,"path":109,"stem":110},"/packages/php/subscriptionplans","3.packages/1.php/4.subscriptionplans",{"title":68,"path":112,"stem":113},"/packages/php/orders","3.packages/1.php/5.orders",{"title":76,"path":115,"stem":116},"/packages/php/refunds","3.packages/1.php/6.refunds",{"title":118,"path":119,"stem":120},"One-Off Products","/packages/php/oneoffproducts","3.packages/1.php/7.oneoffproducts",{"title":80,"path":122,"stem":123},"/packages/php/chargebacks","3.packages/1.php/8.chargebacks",{"title":30,"path":125,"stem":126},"/packages/php/webhooks","3.packages/1.php/9.webhooks",{"title":128,"path":129,"stem":130,"children":131,"page":41},"Laravel","/packages/laravel","3.packages/2.laravel",[132,135,138,141,144,147],{"title":96,"path":133,"stem":134},"/packages/laravel/readme","3.packages/2.laravel/0.readme",{"title":48,"path":136,"stem":137},"/packages/laravel/customers","3.packages/2.laravel/1.customers",{"title":52,"path":139,"stem":140},"/packages/laravel/checkouts","3.packages/2.laravel/2.checkouts",{"title":56,"path":142,"stem":143},"/packages/laravel/subscriptions","3.packages/2.laravel/3.subscriptions",{"title":68,"path":145,"stem":146},"/packages/laravel/orders","3.packages/2.laravel/4.orders",{"title":30,"path":148,"stem":149},"/packages/laravel/webhooks","3.packages/2.laravel/5.webhooks",{"title":151,"path":152,"stem":153},"Integrations","/integrations","4.integrations",{"id":155,"title":56,"body":156,"description":739,"extension":740,"links":741,"meta":742,"navigation":245,"path":142,"seo":744,"stem":143,"__hash__":745},"docs/3.packages/2.laravel/3.subscriptions.md",{"type":157,"value":158,"toc":730},"minimark",[159,163,168,343,347,400,404,494,498,526,529,546,550,605,609,612,634,655,659,662,719,726],[160,161,162],"p",{},"Vatly Laravel provides a full subscription lifecycle: creating, checking, swapping plans, canceling, and syncing with the Vatly API.",[164,165,167],"h2",{"id":166},"checking-subscription-status","Checking subscription status",[169,170,175],"pre",{"className":171,"code":172,"language":173,"meta":174,"style":174},"language-php shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","// Check if the user is subscribed\n$user->subscribed(); // bool\n$user->subscribed('premium'); // check a specific subscription type\n\n// Get the subscription\n$subscription = $user->subscription(); // default type\n$subscription = $user->subscription('premium');\n\n// Get all subscriptions\n$subscriptions = $user->subscriptions; // Collection\n","php","",[176,177,178,187,211,240,247,253,279,307,312,318],"code",{"__ignoreMap":174},[179,180,183],"span",{"class":181,"line":182},"line",1,[179,184,186],{"class":185},"sHwdD","// Check if the user is subscribed\n",[179,188,190,194,198,201,205,208],{"class":181,"line":189},2,[179,191,193],{"class":192},"sMK4o","$",[179,195,197],{"class":196},"sTEyZ","user",[179,199,200],{"class":192},"->",[179,202,204],{"class":203},"s2Zo4","subscribed",[179,206,207],{"class":192},"();",[179,209,210],{"class":185}," // bool\n",[179,212,214,216,218,220,222,225,228,232,234,237],{"class":181,"line":213},3,[179,215,193],{"class":192},[179,217,197],{"class":196},[179,219,200],{"class":192},[179,221,204],{"class":203},[179,223,224],{"class":192},"(",[179,226,227],{"class":192},"'",[179,229,231],{"class":230},"sfazB","premium",[179,233,227],{"class":192},[179,235,236],{"class":192},");",[179,238,239],{"class":185}," // check a specific subscription type\n",[179,241,243],{"class":181,"line":242},4,[179,244,246],{"emptyLinePlaceholder":245},true,"\n",[179,248,250],{"class":181,"line":249},5,[179,251,252],{"class":185},"// Get the subscription\n",[179,254,256,258,261,264,267,269,271,274,276],{"class":181,"line":255},6,[179,257,193],{"class":192},[179,259,260],{"class":196},"subscription ",[179,262,263],{"class":192},"=",[179,265,266],{"class":192}," $",[179,268,197],{"class":196},[179,270,200],{"class":192},[179,272,273],{"class":203},"subscription",[179,275,207],{"class":192},[179,277,278],{"class":185}," // default type\n",[179,280,282,284,286,288,290,292,294,296,298,300,302,304],{"class":181,"line":281},7,[179,283,193],{"class":192},[179,285,260],{"class":196},[179,287,263],{"class":192},[179,289,266],{"class":192},[179,291,197],{"class":196},[179,293,200],{"class":192},[179,295,273],{"class":203},[179,297,224],{"class":192},[179,299,227],{"class":192},[179,301,231],{"class":230},[179,303,227],{"class":192},[179,305,306],{"class":192},");\n",[179,308,310],{"class":181,"line":309},8,[179,311,246],{"emptyLinePlaceholder":245},[179,313,315],{"class":181,"line":314},9,[179,316,317],{"class":185},"// Get all subscriptions\n",[179,319,321,323,326,328,330,332,334,337,340],{"class":181,"line":320},10,[179,322,193],{"class":192},[179,324,325],{"class":196},"subscriptions ",[179,327,263],{"class":192},[179,329,266],{"class":192},[179,331,197],{"class":196},[179,333,200],{"class":192},[179,335,336],{"class":196},"subscriptions",[179,338,339],{"class":192},";",[179,341,342],{"class":185}," // Collection\n",[164,344,346],{"id":345},"subscription-state","Subscription state",[169,348,350],{"className":171,"code":349,"language":173,"meta":174,"style":174},"$subscription->active();       // currently active (including grace period)\n$subscription->cancelled();    // has been cancelled\n$subscription->onGracePeriod(); // cancelled but still active until ends_at\n",[176,351,352,368,384],{"__ignoreMap":174},[179,353,354,356,358,360,363,365],{"class":181,"line":182},[179,355,193],{"class":192},[179,357,273],{"class":196},[179,359,200],{"class":192},[179,361,362],{"class":203},"active",[179,364,207],{"class":192},[179,366,367],{"class":185},"       // currently active (including grace period)\n",[179,369,370,372,374,376,379,381],{"class":181,"line":189},[179,371,193],{"class":192},[179,373,273],{"class":196},[179,375,200],{"class":192},[179,377,378],{"class":203},"cancelled",[179,380,207],{"class":192},[179,382,383],{"class":185},"    // has been cancelled\n",[179,385,386,388,390,392,395,397],{"class":181,"line":213},[179,387,193],{"class":192},[179,389,273],{"class":196},[179,391,200],{"class":192},[179,393,394],{"class":203},"onGracePeriod",[179,396,207],{"class":192},[179,398,399],{"class":185}," // cancelled but still active until ends_at\n",[164,401,403],{"id":402},"swapping-plans","Swapping plans",[169,405,407],{"className":171,"code":406,"language":173,"meta":174,"style":174},"// Swap to a new plan\n$user->subscription()->swap('default', 'subscription_plan_annual');\n\n// Swap and invoice immediately (prorated)\n$user->subscription()->swapAndInvoice('default', 'subscription_plan_annual');\n",[176,408,409,414,452,456,461],{"__ignoreMap":174},[179,410,411],{"class":181,"line":182},[179,412,413],{"class":185},"// Swap to a new plan\n",[179,415,416,418,420,422,424,427,430,432,434,437,439,442,445,448,450],{"class":181,"line":189},[179,417,193],{"class":192},[179,419,197],{"class":196},[179,421,200],{"class":192},[179,423,273],{"class":203},[179,425,426],{"class":192},"()->",[179,428,429],{"class":203},"swap",[179,431,224],{"class":192},[179,433,227],{"class":192},[179,435,436],{"class":230},"default",[179,438,227],{"class":192},[179,440,441],{"class":192},",",[179,443,444],{"class":192}," '",[179,446,447],{"class":230},"subscription_plan_annual",[179,449,227],{"class":192},[179,451,306],{"class":192},[179,453,454],{"class":181,"line":213},[179,455,246],{"emptyLinePlaceholder":245},[179,457,458],{"class":181,"line":242},[179,459,460],{"class":185},"// Swap and invoice immediately (prorated)\n",[179,462,463,465,467,469,471,473,476,478,480,482,484,486,488,490,492],{"class":181,"line":249},[179,464,193],{"class":192},[179,466,197],{"class":196},[179,468,200],{"class":192},[179,470,273],{"class":203},[179,472,426],{"class":192},[179,474,475],{"class":203},"swapAndInvoice",[179,477,224],{"class":192},[179,479,227],{"class":192},[179,481,436],{"class":230},[179,483,227],{"class":192},[179,485,441],{"class":192},[179,487,444],{"class":192},[179,489,447],{"class":230},[179,491,227],{"class":192},[179,493,306],{"class":192},[164,495,497],{"id":496},"canceling","Canceling",[169,499,501],{"className":171,"code":500,"language":173,"meta":174,"style":174},"// Cancel the subscription at Vatly\n$user->subscription()->cancel();\n",[176,502,503,508],{"__ignoreMap":174},[179,504,505],{"class":181,"line":182},[179,506,507],{"class":185},"// Cancel the subscription at Vatly\n",[179,509,510,512,514,516,518,520,523],{"class":181,"line":189},[179,511,193],{"class":192},[179,513,197],{"class":196},[179,515,200],{"class":192},[179,517,273],{"class":203},[179,519,426],{"class":192},[179,521,522],{"class":203},"cancel",[179,524,525],{"class":192},"();\n",[160,527,528],{},"The actual cancellation is processed via webhooks. Depending on the Vatly configuration, the subscription may:",[530,531,532,540],"ul",{},[533,534,535,536,539],"li",{},"End immediately (",[176,537,538],{},"SubscriptionCanceledImmediately"," event)",[533,541,542,543,539],{},"Enter a grace period (",[176,544,545],{},"SubscriptionCanceledWithGracePeriod",[164,547,549],{"id":548},"updating-payment-method","Updating payment method",[169,551,553],{"className":171,"code":552,"language":173,"meta":174,"style":174},"// Get a URL where the customer can update their payment method\n$url = $user->subscription()->updatePaymentMethodUrl();\n\nreturn redirect($url);\n",[176,554,555,560,584,588],{"__ignoreMap":174},[179,556,557],{"class":181,"line":182},[179,558,559],{"class":185},"// Get a URL where the customer can update their payment method\n",[179,561,562,564,567,569,571,573,575,577,579,582],{"class":181,"line":189},[179,563,193],{"class":192},[179,565,566],{"class":196},"url ",[179,568,263],{"class":192},[179,570,266],{"class":192},[179,572,197],{"class":196},[179,574,200],{"class":192},[179,576,273],{"class":203},[179,578,426],{"class":192},[179,580,581],{"class":203},"updatePaymentMethodUrl",[179,583,525],{"class":192},[179,585,586],{"class":181,"line":213},[179,587,246],{"emptyLinePlaceholder":245},[179,589,590,594,597,600,603],{"class":181,"line":242},[179,591,593],{"class":592},"s7zQu","return",[179,595,596],{"class":203}," redirect",[179,598,599],{"class":192},"($",[179,601,602],{"class":196},"url",[179,604,306],{"class":192},[164,606,608],{"id":607},"syncing-with-vatly","Syncing with Vatly",[160,610,611],{},"Pull the latest subscription data from the Vatly API:",[169,613,615],{"className":171,"code":614,"language":173,"meta":174,"style":174},"$user->subscription()->sync();\n",[176,616,617],{"__ignoreMap":174},[179,618,619,621,623,625,627,629,632],{"class":181,"line":182},[179,620,193],{"class":192},[179,622,197],{"class":196},[179,624,200],{"class":192},[179,626,273],{"class":203},[179,628,426],{"class":192},[179,630,631],{"class":203},"sync",[179,633,525],{"class":192},[160,635,636,637,640,641,640,644,640,647,650,651,654],{},"This updates the local ",[176,638,639],{},"plan_id",", ",[176,642,643],{},"name",[176,645,646],{},"quantity",[176,648,649],{},"ends_at",", and ",[176,652,653],{},"trial_ends_at"," fields.",[164,656,658],{"id":657},"subscription-types","Subscription types",[160,660,661],{},"You can have multiple subscriptions per user by using types:",[169,663,665],{"className":171,"code":664,"language":173,"meta":174,"style":174},"// A user with both a \"default\" and \"addon\" subscription\n$user->subscription('default'); // main plan\n$user->subscription('addon');   // additional features\n",[176,666,667,672,695],{"__ignoreMap":174},[179,668,669],{"class":181,"line":182},[179,670,671],{"class":185},"// A user with both a \"default\" and \"addon\" subscription\n",[179,673,674,676,678,680,682,684,686,688,690,692],{"class":181,"line":189},[179,675,193],{"class":192},[179,677,197],{"class":196},[179,679,200],{"class":192},[179,681,273],{"class":203},[179,683,224],{"class":192},[179,685,227],{"class":192},[179,687,436],{"class":230},[179,689,227],{"class":192},[179,691,236],{"class":192},[179,693,694],{"class":185}," // main plan\n",[179,696,697,699,701,703,705,707,709,712,714,716],{"class":181,"line":213},[179,698,193],{"class":192},[179,700,197],{"class":196},[179,702,200],{"class":192},[179,704,273],{"class":203},[179,706,224],{"class":192},[179,708,227],{"class":192},[179,710,711],{"class":230},"addon",[179,713,227],{"class":192},[179,715,236],{"class":192},[179,717,718],{"class":185},"   // additional features\n",[160,720,721,722,725],{},"The default type is ",[176,723,724],{},"'default'",".",[727,728,729],"style",{},"html pre.shiki code .sHwdD, html code.shiki .sHwdD{--shiki-light:#90A4AE;--shiki-light-font-style:italic;--shiki-default:#546E7A;--shiki-default-font-style:italic;--shiki-dark:#676E95;--shiki-dark-font-style:italic}html pre.shiki code .sMK4o, html code.shiki .sMK4o{--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF}html pre.shiki code .sTEyZ, html code.shiki .sTEyZ{--shiki-light:#90A4AE;--shiki-default:#EEFFFF;--shiki-dark:#BABED8}html pre.shiki code .s2Zo4, html code.shiki .s2Zo4{--shiki-light:#6182B8;--shiki-default:#82AAFF;--shiki-dark:#82AAFF}html pre.shiki code .sfazB, html code.shiki .sfazB{--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D}html .light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html.light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html pre.shiki code .s7zQu, html code.shiki .s7zQu{--shiki-light:#39ADB5;--shiki-light-font-style:italic;--shiki-default:#89DDFF;--shiki-default-font-style:italic;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic}",{"title":174,"searchDepth":189,"depth":189,"links":731},[732,733,734,735,736,737,738],{"id":166,"depth":189,"text":167},{"id":345,"depth":189,"text":346},{"id":402,"depth":189,"text":403},{"id":496,"depth":189,"text":497},{"id":548,"depth":189,"text":549},{"id":607,"depth":189,"text":608},{"id":657,"depth":189,"text":658},"Vatly Laravel - Subscriptions","md",null,{"editUrl":743},"https://github.com/vatly/vatly-laravel/edit/main/docs/Subscriptions.md",{"title":56,"description":739},"lZzzQ2gDTljO1skilrSZRZ_LkmfoKPZ5Q2WHhd6qz-s",[747,749],{"title":52,"path":139,"stem":140,"description":748,"children":-1},"Vatly Laravel - Checkouts",{"title":68,"path":145,"stem":146,"description":750,"children":-1},"Vatly Laravel - Orders",1772150456565]