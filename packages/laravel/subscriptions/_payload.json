[{"data":1,"prerenderedAt":754},["ShallowReactive",2],{"navigation_docs":3,"-packages-laravel-subscriptions":155,"-packages-laravel-subscriptions-surround":749},[4,8,42,83,151],{"title":5,"path":6,"stem":7},"Welcome to Vatly","/introduction","0.introduction",{"title":9,"path":10,"stem":11,"children":12,"page":41},"Guides","/guides","1.guides",[13,17,21,25,29,33,37],{"title":14,"path":15,"stem":16},"Quickstart","/guides/quickstart","1.guides/1.quickstart",{"title":18,"path":19,"stem":20},"Vatly SDKs","/guides/sdks","1.guides/2.sdks",{"title":22,"path":23,"stem":24},"Authentication","/guides/authentication","1.guides/3.authentication",{"title":26,"path":27,"stem":28},"Pagination","/guides/pagination","1.guides/4.pagination",{"title":30,"path":31,"stem":32},"Errors","/guides/errors","1.guides/5.errors",{"title":34,"path":35,"stem":36},"Webhooks","/guides/webhooks","1.guides/6.webhooks",{"title":38,"path":39,"stem":40},"Idempotency","/guides/idempotency","1.guides/7.idempotency",false,{"title":43,"path":44,"stem":45,"children":46,"page":41},"Api Reference","/api-reference","2.api-reference",[47,51,55,59,63,67,71,75,79],{"title":48,"path":49,"stem":50},"Customers","/api-reference/customers","2.api-reference/1.customers",{"title":52,"path":53,"stem":54},"Checkouts","/api-reference/checkouts","2.api-reference/2.checkouts",{"title":56,"path":57,"stem":58},"Subscriptions","/api-reference/subscriptions","2.api-reference/3.subscriptions",{"title":60,"path":61,"stem":62},"Subscription Plans","/api-reference/subscription-plans","2.api-reference/4.subscription-plans",{"title":64,"path":65,"stem":66},"Orders","/api-reference/orders","2.api-reference/5.orders",{"title":68,"path":69,"stem":70},"Order Refunds","/api-reference/refunds","2.api-reference/6.refunds",{"title":72,"path":73,"stem":74},"Refunds","/api-reference/global-refunds","2.api-reference/7.global-refunds",{"title":76,"path":77,"stem":78},"Chargebacks","/api-reference/chargebacks","2.api-reference/8.chargebacks",{"title":80,"path":81,"stem":82},"One-off Products","/api-reference/one-off-products","2.api-reference/9.one-off-products",{"title":84,"path":85,"stem":86,"children":87},"Packages","/packages","3.packages",[88,91,128],{"title":89,"path":85,"stem":90},"Overview","3.packages/index",{"title":92,"path":93,"stem":94,"children":95,"page":41},"Php","/packages/php","3.packages/1.php",[96,100,103,106,109,112,115,118,122,125],{"title":97,"path":98,"stem":99},"Getting Started","/packages/php/readme","3.packages/1.php/0.readme",{"title":48,"path":101,"stem":102},"/packages/php/customers","3.packages/1.php/1.customers",{"title":52,"path":104,"stem":105},"/packages/php/checkouts","3.packages/1.php/2.checkouts",{"title":56,"path":107,"stem":108},"/packages/php/subscriptions","3.packages/1.php/3.subscriptions",{"title":60,"path":110,"stem":111},"/packages/php/subscriptionplans","3.packages/1.php/4.subscriptionplans",{"title":64,"path":113,"stem":114},"/packages/php/orders","3.packages/1.php/5.orders",{"title":72,"path":116,"stem":117},"/packages/php/refunds","3.packages/1.php/6.refunds",{"title":119,"path":120,"stem":121},"One-Off Products","/packages/php/oneoffproducts","3.packages/1.php/7.oneoffproducts",{"title":76,"path":123,"stem":124},"/packages/php/chargebacks","3.packages/1.php/8.chargebacks",{"title":34,"path":126,"stem":127},"/packages/php/webhooks","3.packages/1.php/9.webhooks",{"title":129,"path":130,"stem":131,"children":132,"page":41},"Laravel","/packages/laravel","3.packages/2.laravel",[133,136,139,142,145,148],{"title":97,"path":134,"stem":135},"/packages/laravel/readme","3.packages/2.laravel/0.readme",{"title":48,"path":137,"stem":138},"/packages/laravel/customers","3.packages/2.laravel/1.customers",{"title":52,"path":140,"stem":141},"/packages/laravel/checkouts","3.packages/2.laravel/2.checkouts",{"title":56,"path":143,"stem":144},"/packages/laravel/subscriptions","3.packages/2.laravel/3.subscriptions",{"title":64,"path":146,"stem":147},"/packages/laravel/orders","3.packages/2.laravel/4.orders",{"title":34,"path":149,"stem":150},"/packages/laravel/webhooks","3.packages/2.laravel/5.webhooks",{"title":152,"path":153,"stem":154},"Integrations","/integrations","4.integrations",{"id":156,"title":56,"body":157,"description":743,"extension":744,"links":745,"meta":746,"navigation":250,"path":143,"seo":747,"stem":144,"__hash__":748},"docs/3.packages/2.laravel/3.subscriptions.md",{"type":158,"value":159,"toc":734},"minimark",[160,164,168,173,347,351,404,408,498,502,530,533,550,554,609,613,616,638,659,663,666,723,730],[161,162,56],"h1",{"id":163},"subscriptions",[165,166,167],"p",{},"Vatly Laravel provides a full subscription lifecycle: creating, checking, swapping plans, canceling, and syncing with the Vatly API.",[169,170,172],"h2",{"id":171},"checking-subscription-status","Checking subscription status",[174,175,180],"pre",{"className":176,"code":177,"language":178,"meta":179,"style":179},"language-php shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","// Check if the user is subscribed\n$user->subscribed(); // bool\n$user->subscribed('premium'); // check a specific subscription type\n\n// Get the subscription\n$subscription = $user->subscription(); // default type\n$subscription = $user->subscription('premium');\n\n// Get all subscriptions\n$subscriptions = $user->subscriptions; // Collection\n","php","",[181,182,183,192,216,245,252,258,284,312,317,323],"code",{"__ignoreMap":179},[184,185,188],"span",{"class":186,"line":187},"line",1,[184,189,191],{"class":190},"sHwdD","// Check if the user is subscribed\n",[184,193,195,199,203,206,210,213],{"class":186,"line":194},2,[184,196,198],{"class":197},"sMK4o","$",[184,200,202],{"class":201},"sTEyZ","user",[184,204,205],{"class":197},"->",[184,207,209],{"class":208},"s2Zo4","subscribed",[184,211,212],{"class":197},"();",[184,214,215],{"class":190}," // bool\n",[184,217,219,221,223,225,227,230,233,237,239,242],{"class":186,"line":218},3,[184,220,198],{"class":197},[184,222,202],{"class":201},[184,224,205],{"class":197},[184,226,209],{"class":208},[184,228,229],{"class":197},"(",[184,231,232],{"class":197},"'",[184,234,236],{"class":235},"sfazB","premium",[184,238,232],{"class":197},[184,240,241],{"class":197},");",[184,243,244],{"class":190}," // check a specific subscription type\n",[184,246,248],{"class":186,"line":247},4,[184,249,251],{"emptyLinePlaceholder":250},true,"\n",[184,253,255],{"class":186,"line":254},5,[184,256,257],{"class":190},"// Get the subscription\n",[184,259,261,263,266,269,272,274,276,279,281],{"class":186,"line":260},6,[184,262,198],{"class":197},[184,264,265],{"class":201},"subscription ",[184,267,268],{"class":197},"=",[184,270,271],{"class":197}," $",[184,273,202],{"class":201},[184,275,205],{"class":197},[184,277,278],{"class":208},"subscription",[184,280,212],{"class":197},[184,282,283],{"class":190}," // default type\n",[184,285,287,289,291,293,295,297,299,301,303,305,307,309],{"class":186,"line":286},7,[184,288,198],{"class":197},[184,290,265],{"class":201},[184,292,268],{"class":197},[184,294,271],{"class":197},[184,296,202],{"class":201},[184,298,205],{"class":197},[184,300,278],{"class":208},[184,302,229],{"class":197},[184,304,232],{"class":197},[184,306,236],{"class":235},[184,308,232],{"class":197},[184,310,311],{"class":197},");\n",[184,313,315],{"class":186,"line":314},8,[184,316,251],{"emptyLinePlaceholder":250},[184,318,320],{"class":186,"line":319},9,[184,321,322],{"class":190},"// Get all subscriptions\n",[184,324,326,328,331,333,335,337,339,341,344],{"class":186,"line":325},10,[184,327,198],{"class":197},[184,329,330],{"class":201},"subscriptions ",[184,332,268],{"class":197},[184,334,271],{"class":197},[184,336,202],{"class":201},[184,338,205],{"class":197},[184,340,163],{"class":201},[184,342,343],{"class":197},";",[184,345,346],{"class":190}," // Collection\n",[169,348,350],{"id":349},"subscription-state","Subscription state",[174,352,354],{"className":176,"code":353,"language":178,"meta":179,"style":179},"$subscription->active();       // currently active (including grace period)\n$subscription->cancelled();    // has been cancelled\n$subscription->onGracePeriod(); // cancelled but still active until ends_at\n",[181,355,356,372,388],{"__ignoreMap":179},[184,357,358,360,362,364,367,369],{"class":186,"line":187},[184,359,198],{"class":197},[184,361,278],{"class":201},[184,363,205],{"class":197},[184,365,366],{"class":208},"active",[184,368,212],{"class":197},[184,370,371],{"class":190},"       // currently active (including grace period)\n",[184,373,374,376,378,380,383,385],{"class":186,"line":194},[184,375,198],{"class":197},[184,377,278],{"class":201},[184,379,205],{"class":197},[184,381,382],{"class":208},"cancelled",[184,384,212],{"class":197},[184,386,387],{"class":190},"    // has been cancelled\n",[184,389,390,392,394,396,399,401],{"class":186,"line":218},[184,391,198],{"class":197},[184,393,278],{"class":201},[184,395,205],{"class":197},[184,397,398],{"class":208},"onGracePeriod",[184,400,212],{"class":197},[184,402,403],{"class":190}," // cancelled but still active until ends_at\n",[169,405,407],{"id":406},"swapping-plans","Swapping plans",[174,409,411],{"className":176,"code":410,"language":178,"meta":179,"style":179},"// Swap to a new plan\n$user->subscription()->swap('default', 'subscription_plan_annual');\n\n// Swap and invoice immediately (prorated)\n$user->subscription()->swapAndInvoice('default', 'subscription_plan_annual');\n",[181,412,413,418,456,460,465],{"__ignoreMap":179},[184,414,415],{"class":186,"line":187},[184,416,417],{"class":190},"// Swap to a new plan\n",[184,419,420,422,424,426,428,431,434,436,438,441,443,446,449,452,454],{"class":186,"line":194},[184,421,198],{"class":197},[184,423,202],{"class":201},[184,425,205],{"class":197},[184,427,278],{"class":208},[184,429,430],{"class":197},"()->",[184,432,433],{"class":208},"swap",[184,435,229],{"class":197},[184,437,232],{"class":197},[184,439,440],{"class":235},"default",[184,442,232],{"class":197},[184,444,445],{"class":197},",",[184,447,448],{"class":197}," '",[184,450,451],{"class":235},"subscription_plan_annual",[184,453,232],{"class":197},[184,455,311],{"class":197},[184,457,458],{"class":186,"line":218},[184,459,251],{"emptyLinePlaceholder":250},[184,461,462],{"class":186,"line":247},[184,463,464],{"class":190},"// Swap and invoice immediately (prorated)\n",[184,466,467,469,471,473,475,477,480,482,484,486,488,490,492,494,496],{"class":186,"line":254},[184,468,198],{"class":197},[184,470,202],{"class":201},[184,472,205],{"class":197},[184,474,278],{"class":208},[184,476,430],{"class":197},[184,478,479],{"class":208},"swapAndInvoice",[184,481,229],{"class":197},[184,483,232],{"class":197},[184,485,440],{"class":235},[184,487,232],{"class":197},[184,489,445],{"class":197},[184,491,448],{"class":197},[184,493,451],{"class":235},[184,495,232],{"class":197},[184,497,311],{"class":197},[169,499,501],{"id":500},"canceling","Canceling",[174,503,505],{"className":176,"code":504,"language":178,"meta":179,"style":179},"// Cancel the subscription at Vatly\n$user->subscription()->cancel();\n",[181,506,507,512],{"__ignoreMap":179},[184,508,509],{"class":186,"line":187},[184,510,511],{"class":190},"// Cancel the subscription at Vatly\n",[184,513,514,516,518,520,522,524,527],{"class":186,"line":194},[184,515,198],{"class":197},[184,517,202],{"class":201},[184,519,205],{"class":197},[184,521,278],{"class":208},[184,523,430],{"class":197},[184,525,526],{"class":208},"cancel",[184,528,529],{"class":197},"();\n",[165,531,532],{},"The actual cancellation is processed via webhooks. Depending on the Vatly configuration, the subscription may:",[534,535,536,544],"ul",{},[537,538,539,540,543],"li",{},"End immediately (",[181,541,542],{},"SubscriptionCanceledImmediately"," event)",[537,545,546,547,543],{},"Enter a grace period (",[181,548,549],{},"SubscriptionCanceledWithGracePeriod",[169,551,553],{"id":552},"updating-payment-method","Updating payment method",[174,555,557],{"className":176,"code":556,"language":178,"meta":179,"style":179},"// Get a URL where the customer can update their payment method\n$url = $user->subscription()->updatePaymentMethodUrl();\n\nreturn redirect($url);\n",[181,558,559,564,588,592],{"__ignoreMap":179},[184,560,561],{"class":186,"line":187},[184,562,563],{"class":190},"// Get a URL where the customer can update their payment method\n",[184,565,566,568,571,573,575,577,579,581,583,586],{"class":186,"line":194},[184,567,198],{"class":197},[184,569,570],{"class":201},"url ",[184,572,268],{"class":197},[184,574,271],{"class":197},[184,576,202],{"class":201},[184,578,205],{"class":197},[184,580,278],{"class":208},[184,582,430],{"class":197},[184,584,585],{"class":208},"updatePaymentMethodUrl",[184,587,529],{"class":197},[184,589,590],{"class":186,"line":218},[184,591,251],{"emptyLinePlaceholder":250},[184,593,594,598,601,604,607],{"class":186,"line":247},[184,595,597],{"class":596},"s7zQu","return",[184,599,600],{"class":208}," redirect",[184,602,603],{"class":197},"($",[184,605,606],{"class":201},"url",[184,608,311],{"class":197},[169,610,612],{"id":611},"syncing-with-vatly","Syncing with Vatly",[165,614,615],{},"Pull the latest subscription data from the Vatly API:",[174,617,619],{"className":176,"code":618,"language":178,"meta":179,"style":179},"$user->subscription()->sync();\n",[181,620,621],{"__ignoreMap":179},[184,622,623,625,627,629,631,633,636],{"class":186,"line":187},[184,624,198],{"class":197},[184,626,202],{"class":201},[184,628,205],{"class":197},[184,630,278],{"class":208},[184,632,430],{"class":197},[184,634,635],{"class":208},"sync",[184,637,529],{"class":197},[165,639,640,641,644,645,644,648,644,651,654,655,658],{},"This updates the local ",[181,642,643],{},"plan_id",", ",[181,646,647],{},"name",[181,649,650],{},"quantity",[181,652,653],{},"ends_at",", and ",[181,656,657],{},"trial_ends_at"," fields.",[169,660,662],{"id":661},"subscription-types","Subscription types",[165,664,665],{},"You can have multiple subscriptions per user by using types:",[174,667,669],{"className":176,"code":668,"language":178,"meta":179,"style":179},"// A user with both a \"default\" and \"addon\" subscription\n$user->subscription('default'); // main plan\n$user->subscription('addon');   // additional features\n",[181,670,671,676,699],{"__ignoreMap":179},[184,672,673],{"class":186,"line":187},[184,674,675],{"class":190},"// A user with both a \"default\" and \"addon\" subscription\n",[184,677,678,680,682,684,686,688,690,692,694,696],{"class":186,"line":194},[184,679,198],{"class":197},[184,681,202],{"class":201},[184,683,205],{"class":197},[184,685,278],{"class":208},[184,687,229],{"class":197},[184,689,232],{"class":197},[184,691,440],{"class":235},[184,693,232],{"class":197},[184,695,241],{"class":197},[184,697,698],{"class":190}," // main plan\n",[184,700,701,703,705,707,709,711,713,716,718,720],{"class":186,"line":218},[184,702,198],{"class":197},[184,704,202],{"class":201},[184,706,205],{"class":197},[184,708,278],{"class":208},[184,710,229],{"class":197},[184,712,232],{"class":197},[184,714,715],{"class":235},"addon",[184,717,232],{"class":197},[184,719,241],{"class":197},[184,721,722],{"class":190},"   // additional features\n",[165,724,725,726,729],{},"The default type is ",[181,727,728],{},"'default'",".",[731,732,733],"style",{},"html pre.shiki code .sHwdD, html code.shiki .sHwdD{--shiki-light:#90A4AE;--shiki-light-font-style:italic;--shiki-default:#546E7A;--shiki-default-font-style:italic;--shiki-dark:#676E95;--shiki-dark-font-style:italic}html pre.shiki code .sMK4o, html code.shiki .sMK4o{--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF}html pre.shiki code .sTEyZ, html code.shiki .sTEyZ{--shiki-light:#90A4AE;--shiki-default:#EEFFFF;--shiki-dark:#BABED8}html pre.shiki code .s2Zo4, html code.shiki .s2Zo4{--shiki-light:#6182B8;--shiki-default:#82AAFF;--shiki-dark:#82AAFF}html pre.shiki code .sfazB, html code.shiki .sfazB{--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D}html .light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html.light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html pre.shiki code .s7zQu, html code.shiki .s7zQu{--shiki-light:#39ADB5;--shiki-light-font-style:italic;--shiki-default:#89DDFF;--shiki-default-font-style:italic;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic}",{"title":179,"searchDepth":194,"depth":194,"links":735},[736,737,738,739,740,741,742],{"id":171,"depth":194,"text":172},{"id":349,"depth":194,"text":350},{"id":406,"depth":194,"text":407},{"id":500,"depth":194,"text":501},{"id":552,"depth":194,"text":553},{"id":611,"depth":194,"text":612},{"id":661,"depth":194,"text":662},"Vatly Laravel Package - Subscriptions","md",null,{},{"title":56,"description":743},"WOPGUYCIkbmanJKXAc1aTdl4TKdQcQsP2BHjDh-L-lY",[750,752],{"title":52,"path":140,"stem":141,"description":751,"children":-1},"Vatly Laravel Package - Checkouts",{"title":64,"path":146,"stem":147,"description":753,"children":-1},"Vatly Laravel Package - Orders",1772234822864]