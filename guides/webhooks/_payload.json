[{"data":1,"prerenderedAt":1844},["ShallowReactive",2],{"navigation_docs":3,"-guides-webhooks":155,"-guides-webhooks-surround":1839},[4,8,42,83,151],{"title":5,"path":6,"stem":7},"Welcome to Vatly","/introduction","0.introduction",{"title":9,"path":10,"stem":11,"children":12,"page":41},"Guides","/guides","1.guides",[13,17,21,25,29,33,37],{"title":14,"path":15,"stem":16},"Quickstart","/guides/quickstart","1.guides/1.quickstart",{"title":18,"path":19,"stem":20},"Vatly SDKs","/guides/sdks","1.guides/2.sdks",{"title":22,"path":23,"stem":24},"Authentication","/guides/authentication","1.guides/3.authentication",{"title":26,"path":27,"stem":28},"Pagination","/guides/pagination","1.guides/4.pagination",{"title":30,"path":31,"stem":32},"Errors","/guides/errors","1.guides/5.errors",{"title":34,"path":35,"stem":36},"Webhooks","/guides/webhooks","1.guides/6.webhooks",{"title":38,"path":39,"stem":40},"Idempotency","/guides/idempotency","1.guides/7.idempotency",false,{"title":43,"path":44,"stem":45,"children":46,"page":41},"Api Reference","/api-reference","2.api-reference",[47,51,55,59,63,67,71,75,79],{"title":48,"path":49,"stem":50},"Customers","/api-reference/customers","2.api-reference/1.customers",{"title":52,"path":53,"stem":54},"Checkouts","/api-reference/checkouts","2.api-reference/2.checkouts",{"title":56,"path":57,"stem":58},"Subscriptions","/api-reference/subscriptions","2.api-reference/3.subscriptions",{"title":60,"path":61,"stem":62},"Subscription Plans","/api-reference/subscription-plans","2.api-reference/4.subscription-plans",{"title":64,"path":65,"stem":66},"Orders","/api-reference/orders","2.api-reference/5.orders",{"title":68,"path":69,"stem":70},"Order Refunds","/api-reference/refunds","2.api-reference/6.refunds",{"title":72,"path":73,"stem":74},"Refunds","/api-reference/global-refunds","2.api-reference/7.global-refunds",{"title":76,"path":77,"stem":78},"Chargebacks","/api-reference/chargebacks","2.api-reference/8.chargebacks",{"title":80,"path":81,"stem":82},"One-off Products","/api-reference/one-off-products","2.api-reference/9.one-off-products",{"title":84,"path":85,"stem":86,"children":87},"Packages","/packages","3.packages",[88,91,128],{"title":89,"path":85,"stem":90},"Overview","3.packages/index",{"title":92,"path":93,"stem":94,"children":95,"page":41},"Php","/packages/php","3.packages/1.php",[96,100,103,106,109,112,115,118,122,125],{"title":97,"path":98,"stem":99},"Getting Started","/packages/php/readme","3.packages/1.php/0.readme",{"title":48,"path":101,"stem":102},"/packages/php/customers","3.packages/1.php/1.customers",{"title":52,"path":104,"stem":105},"/packages/php/checkouts","3.packages/1.php/2.checkouts",{"title":56,"path":107,"stem":108},"/packages/php/subscriptions","3.packages/1.php/3.subscriptions",{"title":60,"path":110,"stem":111},"/packages/php/subscriptionplans","3.packages/1.php/4.subscriptionplans",{"title":64,"path":113,"stem":114},"/packages/php/orders","3.packages/1.php/5.orders",{"title":72,"path":116,"stem":117},"/packages/php/refunds","3.packages/1.php/6.refunds",{"title":119,"path":120,"stem":121},"One-Off Products","/packages/php/oneoffproducts","3.packages/1.php/7.oneoffproducts",{"title":76,"path":123,"stem":124},"/packages/php/chargebacks","3.packages/1.php/8.chargebacks",{"title":34,"path":126,"stem":127},"/packages/php/webhooks","3.packages/1.php/9.webhooks",{"title":129,"path":130,"stem":131,"children":132,"page":41},"Laravel","/packages/laravel","3.packages/2.laravel",[133,136,139,142,145,148],{"title":97,"path":134,"stem":135},"/packages/laravel/readme","3.packages/2.laravel/0.readme",{"title":48,"path":137,"stem":138},"/packages/laravel/customers","3.packages/2.laravel/1.customers",{"title":52,"path":140,"stem":141},"/packages/laravel/checkouts","3.packages/2.laravel/2.checkouts",{"title":56,"path":143,"stem":144},"/packages/laravel/subscriptions","3.packages/2.laravel/3.subscriptions",{"title":64,"path":146,"stem":147},"/packages/laravel/orders","3.packages/2.laravel/4.orders",{"title":34,"path":149,"stem":150},"/packages/laravel/webhooks","3.packages/2.laravel/5.webhooks",{"title":152,"path":153,"stem":154},"Integrations","/integrations","4.integrations",{"id":156,"title":34,"body":157,"description":1833,"extension":1834,"links":1835,"meta":1836,"navigation":1466,"path":35,"seo":1837,"stem":36,"__hash__":1838},"docs/1.guides/6.webhooks.md",{"type":158,"value":159,"toc":1824},"minimark",[160,165,180,183,187,191,199,314,325,330,334,337,340,344,473,478,482,883,886,1349,1351,1355,1362,1814,1820],[161,162,164],"h2",{"id":163},"registering-webhooks","Registering webhooks",[166,167,168,169,174,175,179],"p",{},"To register a new webhook, you need to have a URL in your app that Vatly can call. You can configure a new webhook from the Vatly dashboard under ",[170,171,173],"a",{"href":172},"#","API settings",". Give your webhook a name, pick the ",[170,176,178],{"href":177},"#event-types","events"," you want to listen for, and add your URL.",[166,181,182],{},"Now, whenever something of interest happens in your app, a webhook is fired off by Vatly. In the next section, we'll look at how to consume webhooks.",[184,185,186],"note",{},"For security reasons, your webhook URL needs to be HTTPS with a valid certificate and reachable from Vatly.",[161,188,190],{"id":189},"consuming-webhooks","Consuming webhooks",[166,192,193,194,198],{},"When your app receives a webhook request from Vatly, check the ",[195,196,197],"code",{},"type"," attribute to see what event caused it. The first part of the event type will tell you the payload type, e.g., a checkout, subscription, etc.",[200,201,207],"pre",{"className":202,"code":203,"filename":204,"language":205,"meta":206,"style":206},"language-json shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","{\n  \"id\": \"whk_a056V9ZCh6X9XZlr\",\n  \"type\": \"subscription.updated\",\n  \"payload\": {\n    \"id\": \"sub_WAz8eIbvDR60rouK\"\n  }\n}\n","Example webhook payload","json","",[195,208,209,218,246,266,281,302,308],{"__ignoreMap":206},[210,211,214],"span",{"class":212,"line":213},"line",1,[210,215,217],{"class":216},"sMK4o","{\n",[210,219,221,224,228,231,234,237,241,243],{"class":212,"line":220},2,[210,222,223],{"class":216},"  \"",[210,225,227],{"class":226},"spNyl","id",[210,229,230],{"class":216},"\"",[210,232,233],{"class":216},":",[210,235,236],{"class":216}," \"",[210,238,240],{"class":239},"sfazB","whk_a056V9ZCh6X9XZlr",[210,242,230],{"class":216},[210,244,245],{"class":216},",\n",[210,247,249,251,253,255,257,259,262,264],{"class":212,"line":248},3,[210,250,223],{"class":216},[210,252,197],{"class":226},[210,254,230],{"class":216},[210,256,233],{"class":216},[210,258,236],{"class":216},[210,260,261],{"class":239},"subscription.updated",[210,263,230],{"class":216},[210,265,245],{"class":216},[210,267,269,271,274,276,278],{"class":212,"line":268},4,[210,270,223],{"class":216},[210,272,273],{"class":226},"payload",[210,275,230],{"class":216},[210,277,233],{"class":216},[210,279,280],{"class":216}," {\n",[210,282,284,287,290,292,294,296,299],{"class":212,"line":283},5,[210,285,286],{"class":216},"    \"",[210,288,227],{"class":289},"sBMFI",[210,291,230],{"class":216},[210,293,233],{"class":216},[210,295,236],{"class":216},[210,297,298],{"class":239},"sub_WAz8eIbvDR60rouK",[210,300,301],{"class":216},"\"\n",[210,303,305],{"class":212,"line":304},6,[210,306,307],{"class":216},"  }\n",[210,309,311],{"class":212,"line":310},7,[210,312,313],{"class":216},"}\n",[166,315,316,317,320,321,324],{},"In the example above, a subscription was ",[195,318,319],{},"updated",", and the payload type is a ",[195,322,323],{},"subscription",".",[166,326,327],{},[170,328,329],{"href":177},"See all event types",[161,331,333],{"id":332},"inspecting-webhooks","Inspecting webhooks",[166,335,336],{},"To make integrating Vatly as smooth as possible, you can inspect a detailed webhook history in your Vatly dashboard.",[338,339],"hr",{},[161,341,343],{"id":342},"event-types","Event types",[345,346,347,360],"table",{},[348,349,350],"thead",{},[351,352,353,357],"tr",{},[354,355,356],"th",{},"Event",[354,358,359],{},"Description",[361,362,363,374,384,394,404,414,424,433,443,453,463],"tbody",{},[351,364,365,371],{},[366,367,368],"td",{},[195,369,370],{},"checkout.created",[366,372,373],{},"A new checkout was created.",[351,375,376,381],{},[366,377,378],{},[195,379,380],{},"checkout.paid",[366,382,383],{},"A checkout was paid successfully.",[351,385,386,391],{},[366,387,388],{},[195,389,390],{},"checkout.expired",[366,392,393],{},"A checkout has expired.",[351,395,396,401],{},[366,397,398],{},[195,399,400],{},"order.created",[366,402,403],{},"A new order was created.",[351,405,406,411],{},[366,407,408],{},[195,409,410],{},"order.paid",[366,412,413],{},"An order was paid successfully.",[351,415,416,421],{},[366,417,418],{},[195,419,420],{},"subscription.created",[366,422,423],{},"A new subscription was created.",[351,425,426,430],{},[366,427,428],{},[195,429,261],{},[366,431,432],{},"An existing subscription was updated (plan change, quantity change, etc.).",[351,434,435,440],{},[366,436,437],{},[195,438,439],{},"subscription.canceled",[366,441,442],{},"A subscription was canceled.",[351,444,445,450],{},[366,446,447],{},[195,448,449],{},"refund.created",[366,451,452],{},"A new refund was created.",[351,454,455,460],{},[366,456,457],{},[195,458,459],{},"refund.completed",[366,461,462],{},"A refund was completed successfully.",[351,464,465,470],{},[366,466,467],{},[195,468,469],{},"chargeback.created",[366,471,472],{},"A chargeback was initiated by the payment provider.",[474,475,477],"h3",{"id":476},"example-payloads","Example payloads",[479,480,380],"h4",{"id":481},"checkoutpaid",[200,483,485],{"className":202,"code":484,"filename":380,"language":205,"meta":206,"style":206},"{\n  \"id\": \"whk_a056V9ZCh6X9XZlr\",\n  \"type\": \"checkout.paid\",\n  \"payload\": {\n    \"id\": \"chk_abc123def456\",\n    \"resource\": \"checkout\",\n    \"merchantId\": \"mer_abc123\",\n    \"orderId\": \"ord_xyz789\",\n    \"testmode\": false,\n    \"status\": \"paid\",\n    \"createdAt\": \"2024-01-15T10:30:00Z\",\n    \"links\": {\n      \"checkoutUrl\": {\n        \"href\": \"https://pay.vatly.com/chk_abc123def456\",\n        \"type\": \"text/html\"\n      },\n      \"self\": {\n        \"href\": \"https://api.vatly.com/v1/checkouts/chk_abc123def456\",\n        \"type\": \"application/json\"\n      },\n      \"order\": {\n        \"href\": \"https://api.vatly.com/v1/orders/ord_xyz789\",\n        \"type\": \"application/json\"\n      }\n    }\n  }\n}\n",[195,486,487,491,509,527,539,558,578,598,619,634,655,676,690,706,729,747,753,767,787,805,810,824,844,861,867,873,878],{"__ignoreMap":206},[210,488,489],{"class":212,"line":213},[210,490,217],{"class":216},[210,492,493,495,497,499,501,503,505,507],{"class":212,"line":220},[210,494,223],{"class":216},[210,496,227],{"class":226},[210,498,230],{"class":216},[210,500,233],{"class":216},[210,502,236],{"class":216},[210,504,240],{"class":239},[210,506,230],{"class":216},[210,508,245],{"class":216},[210,510,511,513,515,517,519,521,523,525],{"class":212,"line":248},[210,512,223],{"class":216},[210,514,197],{"class":226},[210,516,230],{"class":216},[210,518,233],{"class":216},[210,520,236],{"class":216},[210,522,380],{"class":239},[210,524,230],{"class":216},[210,526,245],{"class":216},[210,528,529,531,533,535,537],{"class":212,"line":268},[210,530,223],{"class":216},[210,532,273],{"class":226},[210,534,230],{"class":216},[210,536,233],{"class":216},[210,538,280],{"class":216},[210,540,541,543,545,547,549,551,554,556],{"class":212,"line":283},[210,542,286],{"class":216},[210,544,227],{"class":289},[210,546,230],{"class":216},[210,548,233],{"class":216},[210,550,236],{"class":216},[210,552,553],{"class":239},"chk_abc123def456",[210,555,230],{"class":216},[210,557,245],{"class":216},[210,559,560,562,565,567,569,571,574,576],{"class":212,"line":304},[210,561,286],{"class":216},[210,563,564],{"class":289},"resource",[210,566,230],{"class":216},[210,568,233],{"class":216},[210,570,236],{"class":216},[210,572,573],{"class":239},"checkout",[210,575,230],{"class":216},[210,577,245],{"class":216},[210,579,580,582,585,587,589,591,594,596],{"class":212,"line":310},[210,581,286],{"class":216},[210,583,584],{"class":289},"merchantId",[210,586,230],{"class":216},[210,588,233],{"class":216},[210,590,236],{"class":216},[210,592,593],{"class":239},"mer_abc123",[210,595,230],{"class":216},[210,597,245],{"class":216},[210,599,601,603,606,608,610,612,615,617],{"class":212,"line":600},8,[210,602,286],{"class":216},[210,604,605],{"class":289},"orderId",[210,607,230],{"class":216},[210,609,233],{"class":216},[210,611,236],{"class":216},[210,613,614],{"class":239},"ord_xyz789",[210,616,230],{"class":216},[210,618,245],{"class":216},[210,620,622,624,627,629,631],{"class":212,"line":621},9,[210,623,286],{"class":216},[210,625,626],{"class":289},"testmode",[210,628,230],{"class":216},[210,630,233],{"class":216},[210,632,633],{"class":216}," false,\n",[210,635,637,639,642,644,646,648,651,653],{"class":212,"line":636},10,[210,638,286],{"class":216},[210,640,641],{"class":289},"status",[210,643,230],{"class":216},[210,645,233],{"class":216},[210,647,236],{"class":216},[210,649,650],{"class":239},"paid",[210,652,230],{"class":216},[210,654,245],{"class":216},[210,656,658,660,663,665,667,669,672,674],{"class":212,"line":657},11,[210,659,286],{"class":216},[210,661,662],{"class":289},"createdAt",[210,664,230],{"class":216},[210,666,233],{"class":216},[210,668,236],{"class":216},[210,670,671],{"class":239},"2024-01-15T10:30:00Z",[210,673,230],{"class":216},[210,675,245],{"class":216},[210,677,679,681,684,686,688],{"class":212,"line":678},12,[210,680,286],{"class":216},[210,682,683],{"class":289},"links",[210,685,230],{"class":216},[210,687,233],{"class":216},[210,689,280],{"class":216},[210,691,693,696,700,702,704],{"class":212,"line":692},13,[210,694,695],{"class":216},"      \"",[210,697,699],{"class":698},"sbssI","checkoutUrl",[210,701,230],{"class":216},[210,703,233],{"class":216},[210,705,280],{"class":216},[210,707,709,712,716,718,720,722,725,727],{"class":212,"line":708},14,[210,710,711],{"class":216},"        \"",[210,713,715],{"class":714},"swJcz","href",[210,717,230],{"class":216},[210,719,233],{"class":216},[210,721,236],{"class":216},[210,723,724],{"class":239},"https://pay.vatly.com/chk_abc123def456",[210,726,230],{"class":216},[210,728,245],{"class":216},[210,730,732,734,736,738,740,742,745],{"class":212,"line":731},15,[210,733,711],{"class":216},[210,735,197],{"class":714},[210,737,230],{"class":216},[210,739,233],{"class":216},[210,741,236],{"class":216},[210,743,744],{"class":239},"text/html",[210,746,301],{"class":216},[210,748,750],{"class":212,"line":749},16,[210,751,752],{"class":216},"      },\n",[210,754,756,758,761,763,765],{"class":212,"line":755},17,[210,757,695],{"class":216},[210,759,760],{"class":698},"self",[210,762,230],{"class":216},[210,764,233],{"class":216},[210,766,280],{"class":216},[210,768,770,772,774,776,778,780,783,785],{"class":212,"line":769},18,[210,771,711],{"class":216},[210,773,715],{"class":714},[210,775,230],{"class":216},[210,777,233],{"class":216},[210,779,236],{"class":216},[210,781,782],{"class":239},"https://api.vatly.com/v1/checkouts/chk_abc123def456",[210,784,230],{"class":216},[210,786,245],{"class":216},[210,788,790,792,794,796,798,800,803],{"class":212,"line":789},19,[210,791,711],{"class":216},[210,793,197],{"class":714},[210,795,230],{"class":216},[210,797,233],{"class":216},[210,799,236],{"class":216},[210,801,802],{"class":239},"application/json",[210,804,301],{"class":216},[210,806,808],{"class":212,"line":807},20,[210,809,752],{"class":216},[210,811,813,815,818,820,822],{"class":212,"line":812},21,[210,814,695],{"class":216},[210,816,817],{"class":698},"order",[210,819,230],{"class":216},[210,821,233],{"class":216},[210,823,280],{"class":216},[210,825,827,829,831,833,835,837,840,842],{"class":212,"line":826},22,[210,828,711],{"class":216},[210,830,715],{"class":714},[210,832,230],{"class":216},[210,834,233],{"class":216},[210,836,236],{"class":216},[210,838,839],{"class":239},"https://api.vatly.com/v1/orders/ord_xyz789",[210,841,230],{"class":216},[210,843,245],{"class":216},[210,845,847,849,851,853,855,857,859],{"class":212,"line":846},23,[210,848,711],{"class":216},[210,850,197],{"class":714},[210,852,230],{"class":216},[210,854,233],{"class":216},[210,856,236],{"class":216},[210,858,802],{"class":239},[210,860,301],{"class":216},[210,862,864],{"class":212,"line":863},24,[210,865,866],{"class":216},"      }\n",[210,868,870],{"class":212,"line":869},25,[210,871,872],{"class":216},"    }\n",[210,874,876],{"class":212,"line":875},26,[210,877,307],{"class":216},[210,879,881],{"class":212,"line":880},27,[210,882,313],{"class":216},[479,884,261],{"id":885},"subscriptionupdated",[200,887,889],{"className":202,"code":888,"filename":261,"language":205,"meta":206,"style":206},"{\n  \"id\": \"whk_b167W0AChY7Z0Amr\",\n  \"type\": \"subscription.updated\",\n  \"payload\": {\n    \"id\": \"sub_abc123def456\",\n    \"resource\": \"subscription\",\n    \"customerId\": \"cus_xyz789\",\n    \"testmode\": false,\n    \"name\": \"Premium Plan\",\n    \"status\": \"active\",\n    \"basePrice\": {\n      \"value\": \"99.99\",\n      \"currency\": \"EUR\"\n    },\n    \"quantity\": 1,\n    \"interval\": \"month\",\n    \"intervalCount\": 1,\n    \"startedAt\": \"2024-01-15T10:30:00Z\",\n    \"renewedUntil\": \"2024-02-15T10:30:00Z\",\n    \"nextRenewalAt\": \"2024-02-15T10:30:00Z\",\n    \"links\": {\n      \"self\": {\n        \"href\": \"https://api.vatly.com/v1/subscriptions/sub_abc123def456\",\n        \"type\": \"application/json\"\n      },\n      \"customer\": {\n        \"href\": \"https://api.vatly.com/v1/customers/cus_xyz789\",\n        \"type\": \"application/json\"\n      }\n    }\n  }\n}\n",[195,890,891,895,914,932,944,963,981,1001,1013,1033,1052,1065,1085,1103,1108,1124,1144,1159,1178,1198,1217,1229,1241,1260,1276,1280,1293,1312,1329,1334,1339,1344],{"__ignoreMap":206},[210,892,893],{"class":212,"line":213},[210,894,217],{"class":216},[210,896,897,899,901,903,905,907,910,912],{"class":212,"line":220},[210,898,223],{"class":216},[210,900,227],{"class":226},[210,902,230],{"class":216},[210,904,233],{"class":216},[210,906,236],{"class":216},[210,908,909],{"class":239},"whk_b167W0AChY7Z0Amr",[210,911,230],{"class":216},[210,913,245],{"class":216},[210,915,916,918,920,922,924,926,928,930],{"class":212,"line":248},[210,917,223],{"class":216},[210,919,197],{"class":226},[210,921,230],{"class":216},[210,923,233],{"class":216},[210,925,236],{"class":216},[210,927,261],{"class":239},[210,929,230],{"class":216},[210,931,245],{"class":216},[210,933,934,936,938,940,942],{"class":212,"line":268},[210,935,223],{"class":216},[210,937,273],{"class":226},[210,939,230],{"class":216},[210,941,233],{"class":216},[210,943,280],{"class":216},[210,945,946,948,950,952,954,956,959,961],{"class":212,"line":283},[210,947,286],{"class":216},[210,949,227],{"class":289},[210,951,230],{"class":216},[210,953,233],{"class":216},[210,955,236],{"class":216},[210,957,958],{"class":239},"sub_abc123def456",[210,960,230],{"class":216},[210,962,245],{"class":216},[210,964,965,967,969,971,973,975,977,979],{"class":212,"line":304},[210,966,286],{"class":216},[210,968,564],{"class":289},[210,970,230],{"class":216},[210,972,233],{"class":216},[210,974,236],{"class":216},[210,976,323],{"class":239},[210,978,230],{"class":216},[210,980,245],{"class":216},[210,982,983,985,988,990,992,994,997,999],{"class":212,"line":310},[210,984,286],{"class":216},[210,986,987],{"class":289},"customerId",[210,989,230],{"class":216},[210,991,233],{"class":216},[210,993,236],{"class":216},[210,995,996],{"class":239},"cus_xyz789",[210,998,230],{"class":216},[210,1000,245],{"class":216},[210,1002,1003,1005,1007,1009,1011],{"class":212,"line":600},[210,1004,286],{"class":216},[210,1006,626],{"class":289},[210,1008,230],{"class":216},[210,1010,233],{"class":216},[210,1012,633],{"class":216},[210,1014,1015,1017,1020,1022,1024,1026,1029,1031],{"class":212,"line":621},[210,1016,286],{"class":216},[210,1018,1019],{"class":289},"name",[210,1021,230],{"class":216},[210,1023,233],{"class":216},[210,1025,236],{"class":216},[210,1027,1028],{"class":239},"Premium Plan",[210,1030,230],{"class":216},[210,1032,245],{"class":216},[210,1034,1035,1037,1039,1041,1043,1045,1048,1050],{"class":212,"line":636},[210,1036,286],{"class":216},[210,1038,641],{"class":289},[210,1040,230],{"class":216},[210,1042,233],{"class":216},[210,1044,236],{"class":216},[210,1046,1047],{"class":239},"active",[210,1049,230],{"class":216},[210,1051,245],{"class":216},[210,1053,1054,1056,1059,1061,1063],{"class":212,"line":657},[210,1055,286],{"class":216},[210,1057,1058],{"class":289},"basePrice",[210,1060,230],{"class":216},[210,1062,233],{"class":216},[210,1064,280],{"class":216},[210,1066,1067,1069,1072,1074,1076,1078,1081,1083],{"class":212,"line":678},[210,1068,695],{"class":216},[210,1070,1071],{"class":698},"value",[210,1073,230],{"class":216},[210,1075,233],{"class":216},[210,1077,236],{"class":216},[210,1079,1080],{"class":239},"99.99",[210,1082,230],{"class":216},[210,1084,245],{"class":216},[210,1086,1087,1089,1092,1094,1096,1098,1101],{"class":212,"line":692},[210,1088,695],{"class":216},[210,1090,1091],{"class":698},"currency",[210,1093,230],{"class":216},[210,1095,233],{"class":216},[210,1097,236],{"class":216},[210,1099,1100],{"class":239},"EUR",[210,1102,301],{"class":216},[210,1104,1105],{"class":212,"line":708},[210,1106,1107],{"class":216},"    },\n",[210,1109,1110,1112,1115,1117,1119,1122],{"class":212,"line":731},[210,1111,286],{"class":216},[210,1113,1114],{"class":289},"quantity",[210,1116,230],{"class":216},[210,1118,233],{"class":216},[210,1120,1121],{"class":698}," 1",[210,1123,245],{"class":216},[210,1125,1126,1128,1131,1133,1135,1137,1140,1142],{"class":212,"line":749},[210,1127,286],{"class":216},[210,1129,1130],{"class":289},"interval",[210,1132,230],{"class":216},[210,1134,233],{"class":216},[210,1136,236],{"class":216},[210,1138,1139],{"class":239},"month",[210,1141,230],{"class":216},[210,1143,245],{"class":216},[210,1145,1146,1148,1151,1153,1155,1157],{"class":212,"line":755},[210,1147,286],{"class":216},[210,1149,1150],{"class":289},"intervalCount",[210,1152,230],{"class":216},[210,1154,233],{"class":216},[210,1156,1121],{"class":698},[210,1158,245],{"class":216},[210,1160,1161,1163,1166,1168,1170,1172,1174,1176],{"class":212,"line":769},[210,1162,286],{"class":216},[210,1164,1165],{"class":289},"startedAt",[210,1167,230],{"class":216},[210,1169,233],{"class":216},[210,1171,236],{"class":216},[210,1173,671],{"class":239},[210,1175,230],{"class":216},[210,1177,245],{"class":216},[210,1179,1180,1182,1185,1187,1189,1191,1194,1196],{"class":212,"line":789},[210,1181,286],{"class":216},[210,1183,1184],{"class":289},"renewedUntil",[210,1186,230],{"class":216},[210,1188,233],{"class":216},[210,1190,236],{"class":216},[210,1192,1193],{"class":239},"2024-02-15T10:30:00Z",[210,1195,230],{"class":216},[210,1197,245],{"class":216},[210,1199,1200,1202,1205,1207,1209,1211,1213,1215],{"class":212,"line":807},[210,1201,286],{"class":216},[210,1203,1204],{"class":289},"nextRenewalAt",[210,1206,230],{"class":216},[210,1208,233],{"class":216},[210,1210,236],{"class":216},[210,1212,1193],{"class":239},[210,1214,230],{"class":216},[210,1216,245],{"class":216},[210,1218,1219,1221,1223,1225,1227],{"class":212,"line":812},[210,1220,286],{"class":216},[210,1222,683],{"class":289},[210,1224,230],{"class":216},[210,1226,233],{"class":216},[210,1228,280],{"class":216},[210,1230,1231,1233,1235,1237,1239],{"class":212,"line":826},[210,1232,695],{"class":216},[210,1234,760],{"class":698},[210,1236,230],{"class":216},[210,1238,233],{"class":216},[210,1240,280],{"class":216},[210,1242,1243,1245,1247,1249,1251,1253,1256,1258],{"class":212,"line":846},[210,1244,711],{"class":216},[210,1246,715],{"class":714},[210,1248,230],{"class":216},[210,1250,233],{"class":216},[210,1252,236],{"class":216},[210,1254,1255],{"class":239},"https://api.vatly.com/v1/subscriptions/sub_abc123def456",[210,1257,230],{"class":216},[210,1259,245],{"class":216},[210,1261,1262,1264,1266,1268,1270,1272,1274],{"class":212,"line":863},[210,1263,711],{"class":216},[210,1265,197],{"class":714},[210,1267,230],{"class":216},[210,1269,233],{"class":216},[210,1271,236],{"class":216},[210,1273,802],{"class":239},[210,1275,301],{"class":216},[210,1277,1278],{"class":212,"line":869},[210,1279,752],{"class":216},[210,1281,1282,1284,1287,1289,1291],{"class":212,"line":875},[210,1283,695],{"class":216},[210,1285,1286],{"class":698},"customer",[210,1288,230],{"class":216},[210,1290,233],{"class":216},[210,1292,280],{"class":216},[210,1294,1295,1297,1299,1301,1303,1305,1308,1310],{"class":212,"line":880},[210,1296,711],{"class":216},[210,1298,715],{"class":714},[210,1300,230],{"class":216},[210,1302,233],{"class":216},[210,1304,236],{"class":216},[210,1306,1307],{"class":239},"https://api.vatly.com/v1/customers/cus_xyz789",[210,1309,230],{"class":216},[210,1311,245],{"class":216},[210,1313,1315,1317,1319,1321,1323,1325,1327],{"class":212,"line":1314},28,[210,1316,711],{"class":216},[210,1318,197],{"class":714},[210,1320,230],{"class":216},[210,1322,233],{"class":216},[210,1324,236],{"class":216},[210,1326,802],{"class":239},[210,1328,301],{"class":216},[210,1330,1332],{"class":212,"line":1331},29,[210,1333,866],{"class":216},[210,1335,1337],{"class":212,"line":1336},30,[210,1338,872],{"class":216},[210,1340,1342],{"class":212,"line":1341},31,[210,1343,307],{"class":216},[210,1345,1347],{"class":212,"line":1346},32,[210,1348,313],{"class":216},[338,1350],{},[161,1352,1354],{"id":1353},"security","Security",[166,1356,1357,1358,1361],{},"To know for sure that a webhook was, in fact, sent by Vatly instead of a malicious actor, you can verify the request signature. Each webhook request contains a header named ",[195,1359,1360],{},"x-vatly-signature",", and you can verify this signature by using your secret webhook key. The signature is an HMAC hash of the request payload hashed using your secret key. Here is an example of how to verify the signature in your app:",[1363,1364,1365,1510,1689],"code-group",{},[200,1366,1371],{"className":1367,"code":1368,"filename":1369,"language":1370,"meta":206,"style":206},"language-js shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","const signature = req.headers['x-vatly-signature']\nconst hash = crypto.createHmac('sha256', secret).update(payload).digest('hex')\n\nif (hash === signature) {\n  // Request is verified\n} else {\n  // Request could not be verified\n}\n","JavaScript","js",[195,1372,1373,1403,1462,1468,1485,1491,1501,1506],{"__ignoreMap":206},[210,1374,1375,1378,1382,1385,1388,1390,1393,1396,1398,1400],{"class":212,"line":213},[210,1376,1377],{"class":226},"const",[210,1379,1381],{"class":1380},"sTEyZ"," signature ",[210,1383,1384],{"class":216},"=",[210,1386,1387],{"class":1380}," req",[210,1389,324],{"class":216},[210,1391,1392],{"class":1380},"headers[",[210,1394,1395],{"class":216},"'",[210,1397,1360],{"class":239},[210,1399,1395],{"class":216},[210,1401,1402],{"class":1380},"]\n",[210,1404,1405,1407,1410,1412,1415,1417,1421,1424,1426,1429,1431,1434,1437,1439,1442,1445,1447,1450,1452,1454,1457,1459],{"class":212,"line":220},[210,1406,1377],{"class":226},[210,1408,1409],{"class":1380}," hash ",[210,1411,1384],{"class":216},[210,1413,1414],{"class":1380}," crypto",[210,1416,324],{"class":216},[210,1418,1420],{"class":1419},"s2Zo4","createHmac",[210,1422,1423],{"class":1380},"(",[210,1425,1395],{"class":216},[210,1427,1428],{"class":239},"sha256",[210,1430,1395],{"class":216},[210,1432,1433],{"class":216},",",[210,1435,1436],{"class":1380}," secret)",[210,1438,324],{"class":216},[210,1440,1441],{"class":1419},"update",[210,1443,1444],{"class":1380},"(payload)",[210,1446,324],{"class":216},[210,1448,1449],{"class":1419},"digest",[210,1451,1423],{"class":1380},[210,1453,1395],{"class":216},[210,1455,1456],{"class":239},"hex",[210,1458,1395],{"class":216},[210,1460,1461],{"class":1380},")\n",[210,1463,1464],{"class":212,"line":248},[210,1465,1467],{"emptyLinePlaceholder":1466},true,"\n",[210,1469,1470,1474,1477,1480,1483],{"class":212,"line":268},[210,1471,1473],{"class":1472},"s7zQu","if",[210,1475,1476],{"class":1380}," (hash ",[210,1478,1479],{"class":216},"===",[210,1481,1482],{"class":1380}," signature) ",[210,1484,217],{"class":216},[210,1486,1487],{"class":212,"line":283},[210,1488,1490],{"class":1489},"sHwdD","  // Request is verified\n",[210,1492,1493,1496,1499],{"class":212,"line":304},[210,1494,1495],{"class":216},"}",[210,1497,1498],{"class":1472}," else",[210,1500,280],{"class":216},[210,1502,1503],{"class":212,"line":310},[210,1504,1505],{"class":1489},"  // Request could not be verified\n",[210,1507,1508],{"class":212,"line":600},[210,1509,313],{"class":216},[200,1511,1516],{"className":1512,"code":1513,"filename":1514,"language":1515,"meta":206,"style":206},"language-python shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","from flask import request\nimport hmac\nimport hashlib\n\nsignature = request.headers.get(\"x-vatly-signature\")\nhash = hmac.new(bytes(secret, \"ascii\"), bytes(payload, \"ascii\"), hashlib.sha256)\n\nif hash.hexdigest() == signature:\n    # Request is verified\nelse:\n    # Request could not be verified\n","Python","python",[195,1517,1518,1532,1539,1546,1550,1580,1644,1648,1672,1677,1684],{"__ignoreMap":206},[210,1519,1520,1523,1526,1529],{"class":212,"line":213},[210,1521,1522],{"class":1472},"from",[210,1524,1525],{"class":1380}," flask ",[210,1527,1528],{"class":1472},"import",[210,1530,1531],{"class":1380}," request\n",[210,1533,1534,1536],{"class":212,"line":220},[210,1535,1528],{"class":1472},[210,1537,1538],{"class":1380}," hmac\n",[210,1540,1541,1543],{"class":212,"line":248},[210,1542,1528],{"class":1472},[210,1544,1545],{"class":1380}," hashlib\n",[210,1547,1548],{"class":212,"line":268},[210,1549,1467],{"emptyLinePlaceholder":1466},[210,1551,1552,1555,1557,1560,1562,1565,1567,1570,1572,1574,1576,1578],{"class":212,"line":283},[210,1553,1554],{"class":1380},"signature ",[210,1556,1384],{"class":216},[210,1558,1559],{"class":1380}," request",[210,1561,324],{"class":216},[210,1563,1564],{"class":714},"headers",[210,1566,324],{"class":216},[210,1568,1569],{"class":1419},"get",[210,1571,1423],{"class":216},[210,1573,230],{"class":216},[210,1575,1360],{"class":239},[210,1577,230],{"class":216},[210,1579,1461],{"class":216},[210,1581,1582,1585,1588,1591,1593,1596,1598,1601,1603,1606,1608,1610,1613,1615,1618,1621,1623,1625,1627,1629,1631,1633,1635,1638,1640,1642],{"class":212,"line":304},[210,1583,1584],{"class":1419},"hash",[210,1586,1587],{"class":216}," =",[210,1589,1590],{"class":1380}," hmac",[210,1592,324],{"class":216},[210,1594,1595],{"class":1419},"new",[210,1597,1423],{"class":216},[210,1599,1600],{"class":289},"bytes",[210,1602,1423],{"class":216},[210,1604,1605],{"class":1419},"secret",[210,1607,1433],{"class":216},[210,1609,236],{"class":216},[210,1611,1612],{"class":239},"ascii",[210,1614,230],{"class":216},[210,1616,1617],{"class":216},"),",[210,1619,1620],{"class":289}," bytes",[210,1622,1423],{"class":216},[210,1624,273],{"class":1419},[210,1626,1433],{"class":216},[210,1628,236],{"class":216},[210,1630,1612],{"class":239},[210,1632,230],{"class":216},[210,1634,1617],{"class":216},[210,1636,1637],{"class":1419}," hashlib",[210,1639,324],{"class":216},[210,1641,1428],{"class":714},[210,1643,1461],{"class":216},[210,1645,1646],{"class":212,"line":310},[210,1647,1467],{"emptyLinePlaceholder":1466},[210,1649,1650,1652,1655,1657,1660,1663,1666,1669],{"class":212,"line":600},[210,1651,1473],{"class":1472},[210,1653,1654],{"class":1419}," hash",[210,1656,324],{"class":216},[210,1658,1659],{"class":1419},"hexdigest",[210,1661,1662],{"class":216},"()",[210,1664,1665],{"class":216}," ==",[210,1667,1668],{"class":1380}," signature",[210,1670,1671],{"class":216},":\n",[210,1673,1674],{"class":212,"line":621},[210,1675,1676],{"class":1489},"    # Request is verified\n",[210,1678,1679,1682],{"class":212,"line":636},[210,1680,1681],{"class":1472},"else",[210,1683,1671],{"class":216},[210,1685,1686],{"class":212,"line":657},[210,1687,1688],{"class":1489},"    # Request could not be verified\n",[200,1690,1695],{"className":1691,"code":1692,"filename":1693,"language":1694,"meta":206,"style":206},"language-php shiki shiki-themes material-theme-lighter material-theme material-theme-palenight","$signature = $request->header('x-vatly-signature');\n$hash = hash_hmac('sha256', $payload, $secret);\n\nif (hash_equals($hash, $signature)) {\n  // Request is verified\n} else {\n  // Request could not be verified\n}\n","PHP","php",[195,1696,1697,1729,1763,1767,1794,1798,1806,1810],{"__ignoreMap":206},[210,1698,1699,1702,1704,1706,1709,1712,1715,1718,1720,1722,1724,1726],{"class":212,"line":213},[210,1700,1701],{"class":216},"$",[210,1703,1554],{"class":1380},[210,1705,1384],{"class":216},[210,1707,1708],{"class":216}," $",[210,1710,1711],{"class":1380},"request",[210,1713,1714],{"class":216},"->",[210,1716,1717],{"class":1419},"header",[210,1719,1423],{"class":216},[210,1721,1395],{"class":216},[210,1723,1360],{"class":239},[210,1725,1395],{"class":216},[210,1727,1728],{"class":216},");\n",[210,1730,1731,1733,1736,1738,1741,1743,1745,1747,1749,1751,1753,1755,1757,1759,1761],{"class":212,"line":220},[210,1732,1701],{"class":216},[210,1734,1735],{"class":1380},"hash ",[210,1737,1384],{"class":216},[210,1739,1740],{"class":1419}," hash_hmac",[210,1742,1423],{"class":216},[210,1744,1395],{"class":216},[210,1746,1428],{"class":239},[210,1748,1395],{"class":216},[210,1750,1433],{"class":216},[210,1752,1708],{"class":216},[210,1754,273],{"class":1380},[210,1756,1433],{"class":216},[210,1758,1708],{"class":216},[210,1760,1605],{"class":1380},[210,1762,1728],{"class":216},[210,1764,1765],{"class":212,"line":248},[210,1766,1467],{"emptyLinePlaceholder":1466},[210,1768,1769,1771,1774,1777,1780,1782,1784,1786,1789,1792],{"class":212,"line":268},[210,1770,1473],{"class":1472},[210,1772,1773],{"class":216}," (",[210,1775,1776],{"class":1419},"hash_equals",[210,1778,1779],{"class":216},"($",[210,1781,1584],{"class":1380},[210,1783,1433],{"class":216},[210,1785,1708],{"class":216},[210,1787,1788],{"class":1380},"signature",[210,1790,1791],{"class":216},"))",[210,1793,280],{"class":216},[210,1795,1796],{"class":212,"line":283},[210,1797,1490],{"class":1489},[210,1799,1800,1802,1804],{"class":212,"line":304},[210,1801,1495],{"class":216},[210,1803,1498],{"class":1472},[210,1805,280],{"class":216},[210,1807,1808],{"class":212,"line":310},[210,1809,1505],{"class":1489},[210,1811,1812],{"class":212,"line":600},[210,1813,313],{"class":216},[166,1815,1816,1817,1819],{},"If your generated signature matches the ",[195,1818,1360],{}," header, you can be sure that the request was truly coming from Vatly. It's essential to keep your secret webhook key safe. Otherwise, you can no longer be sure that a given webhook was sent by Vatly. Don't commit your secret webhook key to GitHub!",[1821,1822,1823],"style",{},"html pre.shiki code .sMK4o, html code.shiki .sMK4o{--shiki-light:#39ADB5;--shiki-default:#89DDFF;--shiki-dark:#89DDFF}html pre.shiki code .spNyl, html code.shiki .spNyl{--shiki-light:#9C3EDA;--shiki-default:#C792EA;--shiki-dark:#C792EA}html pre.shiki code .sfazB, html code.shiki .sfazB{--shiki-light:#91B859;--shiki-default:#C3E88D;--shiki-dark:#C3E88D}html pre.shiki code .sBMFI, html code.shiki .sBMFI{--shiki-light:#E2931D;--shiki-default:#FFCB6B;--shiki-dark:#FFCB6B}html .light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html.light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html pre.shiki code .sbssI, html code.shiki .sbssI{--shiki-light:#F76D47;--shiki-default:#F78C6C;--shiki-dark:#F78C6C}html pre.shiki code .swJcz, html code.shiki .swJcz{--shiki-light:#E53935;--shiki-default:#F07178;--shiki-dark:#F07178}html pre.shiki code .sTEyZ, html code.shiki .sTEyZ{--shiki-light:#90A4AE;--shiki-default:#EEFFFF;--shiki-dark:#BABED8}html pre.shiki code .s2Zo4, html code.shiki .s2Zo4{--shiki-light:#6182B8;--shiki-default:#82AAFF;--shiki-dark:#82AAFF}html pre.shiki code .s7zQu, html code.shiki .s7zQu{--shiki-light:#39ADB5;--shiki-light-font-style:italic;--shiki-default:#89DDFF;--shiki-default-font-style:italic;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic}html pre.shiki code .sHwdD, html code.shiki .sHwdD{--shiki-light:#90A4AE;--shiki-light-font-style:italic;--shiki-default:#546E7A;--shiki-default-font-style:italic;--shiki-dark:#676E95;--shiki-dark-font-style:italic}",{"title":206,"searchDepth":220,"depth":220,"links":1825},[1826,1827,1828,1829,1832],{"id":163,"depth":220,"text":164},{"id":189,"depth":220,"text":190},{"id":332,"depth":220,"text":333},{"id":342,"depth":220,"text":343,"children":1830},[1831],{"id":476,"depth":248,"text":477},{"id":1353,"depth":220,"text":1354},"In this guide, we will look at how to register and consume webhooks to integrate your app with Vatly.","md",null,{},{"title":34,"description":1833},"BtZE6mpeAJr-pXjWy_EnO3YZ7q01zkCUoOXS8wTjZcQ",[1840,1842],{"title":30,"path":31,"stem":32,"description":1841,"children":-1},"This guide covers API error handling, including status codes and error types.",{"title":38,"path":39,"stem":40,"description":1843,"children":-1},"Learn how to use idempotency keys to safely retry API requests without creating duplicate resources.",1772234166699]